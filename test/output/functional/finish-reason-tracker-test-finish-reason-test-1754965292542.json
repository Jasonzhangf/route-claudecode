{
  "sessionId": "finish-reason-test-1754965292542",
  "startTime": "2025-08-12T02:21:32.542Z",
  "tests": [
    {
      "name": "Finish Reason Categorization",
      "startTime": "2025-08-12T02:21:32.545Z",
      "status": "passed",
      "validations": [
        {
          "test": "Categorization Accuracy",
          "status": "passed",
          "details": "16/16 correct categorizations"
        },
        {
          "test": "Case Insensitive Handling",
          "status": "passed",
          "details": "Case insensitive categorization works"
        },
        {
          "test": "Null/Empty Handling",
          "status": "passed",
          "details": "Null/empty values default to unknown"
        },
        {
          "test": "Partial Match Support",
          "status": "passed",
          "details": "Partial matching works for complex finish reasons"
        }
      ],
      "duration": 3,
      "endTime": "2025-08-12T02:21:32.548Z"
    },
    {
      "name": "Tracker Initialization and Setup",
      "startTime": "2025-08-12T02:21:32.545Z",
      "status": "passed",
      "validations": [
        {
          "test": "Tracker Initialization",
          "status": "passed",
          "details": "Initialization status: initialized"
        },
        {
          "test": "Base Directory Creation",
          "status": "passed",
          "details": "Base directory: /Users/fanzhang/Documents/github/route-claudecode/test/output/functional/test-finish-reason-data"
        },
        {
          "test": "Subdirectory Structure",
          "status": "passed",
          "details": "All required subdirectories created"
        },
        {
          "test": "Configuration Loading",
          "status": "passed",
          "details": "Categories loaded: 8"
        },
        {
          "test": "Provider Protocols Setup",
          "status": "passed",
          "details": "Provider protocols: 5"
        }
      ],
      "tracker": {
        "_events": {},
        "_eventsCount": 0,
        "config": {
          "baseDir": "/Users/fanzhang/Documents/github/route-claudecode/test/output/functional/test-finish-reason-data",
          "alertThresholds": {
            "errorRateHigh": 0.2,
            "rateLimitFrequency": 3
          },
          "categories": [
            "stop",
            "length",
            "tool_calls",
            "error",
            "timeout",
            "rate_limit",
            "content_filter",
            "unknown"
          ],
          "providerProtocols": [
            "anthropic",
            "openai",
            "gemini",
            "codewhisperer",
            "unknown"
          ],
          "retentionDays": 30
        },
        "data": {
          "finishReasons": {},
          "patterns": {},
          "alerts": [],
          "statistics": {}
        },
        "initialized": true
      },
      "duration": 5,
      "endTime": "2025-08-12T02:21:32.550Z"
    },
    {
      "name": "CLI Interface Validation",
      "startTime": "2025-08-12T02:21:32.546Z",
      "status": "passed",
      "validations": [
        {
          "test": "Query Command",
          "status": "passed",
          "details": "Query command executed successfully"
        },
        {
          "test": "Report Command",
          "status": "passed",
          "details": "Report command executed successfully"
        },
        {
          "test": "Export Command",
          "status": "passed",
          "details": "Export command executed successfully"
        },
        {
          "test": "Alerts Command",
          "status": "passed",
          "details": "Alerts command executed successfully"
        },
        {
          "test": "Help Command",
          "status": "passed",
          "details": "Help command executed successfully"
        },
        {
          "test": "Invalid Command Handling",
          "status": "passed",
          "details": "Invalid commands show help"
        }
      ],
      "duration": 6,
      "endTime": "2025-08-12T02:21:32.552Z"
    },
    {
      "name": "Finish Reason Logging",
      "startTime": "2025-08-12T02:21:32.545Z",
      "status": "passed",
      "validations": [
        {
          "test": "Entry Logging Success",
          "status": "passed",
          "details": "Logged 4 entries successfully"
        },
        {
          "test": "Entry ID Generation",
          "status": "passed",
          "details": "All entries have generated IDs"
        },
        {
          "test": "Category Assignment",
          "status": "passed",
          "details": "All expected categories assigned"
        },
        {
          "test": "Provider Tracking",
          "status": "passed",
          "details": "All providers tracked correctly"
        }
      ],
      "logResults": [
        {
          "status": "logged",
          "id": "7eeuch0o",
          "category": "stop",
          "provider": "anthropic"
        },
        {
          "status": "logged",
          "id": "fwd33zhw",
          "category": "length",
          "provider": "openai"
        },
        {
          "status": "logged",
          "id": "vlzmi336",
          "category": "tool_calls",
          "provider": "gemini"
        },
        {
          "status": "logged",
          "id": "f19krilt",
          "category": "error",
          "provider": "codewhisperer"
        }
      ],
      "duration": 8,
      "endTime": "2025-08-12T02:21:32.553Z"
    },
    {
      "name": "Query and Filtering Capabilities",
      "startTime": "2025-08-12T02:21:32.545Z",
      "status": "passed",
      "validations": [
        {
          "test": "Provider Filtering",
          "status": "passed",
          "details": "Anthropic results: 3"
        },
        {
          "test": "Category Filtering",
          "status": "passed",
          "details": "Stop results: 4"
        },
        {
          "test": "Combined Filtering",
          "status": "passed",
          "details": "Combined results: 1"
        },
        {
          "test": "Pagination Support",
          "status": "passed",
          "details": "Limited results: 2, offset: 1"
        },
        {
          "test": "Finish Reason Search",
          "status": "passed",
          "details": "Search results: 4"
        },
        {
          "test": "No Results Handling",
          "status": "passed",
          "details": "Empty results handled correctly"
        }
      ],
      "duration": 8,
      "endTime": "2025-08-12T02:21:32.553Z"
    },
    {
      "name": "Export Functionality",
      "startTime": "2025-08-12T02:21:32.546Z",
      "status": "passed",
      "validations": [
        {
          "test": "JSON Export Creation",
          "status": "passed",
          "details": "JSON export: /Users/fanzhang/Documents/github/route-claudecode/test/output/functional/test-finish-reason-data/exports/finish-reasons-export-2025-08-12T02-21-32-551Z.json"
        },
        {
          "test": "JSON Export File Size",
          "status": "passed",
          "details": "JSON file size: 5703 bytes"
        },
        {
          "test": "CSV Export Creation",
          "status": "passed",
          "details": "CSV export: /Users/fanzhang/Documents/github/route-claudecode/test/output/functional/test-finish-reason-data/exports/finish-reasons-export-2025-08-12T02-21-32-552Z.csv"
        },
        {
          "test": "Summary Export Creation",
          "status": "passed",
          "details": "Summary export: /Users/fanzhang/Documents/github/route-claudecode/test/output/functional/test-finish-reason-data/exports/finish-reasons-summary-2025-08-12T02-21-32-552Z.json"
        },
        {
          "test": "Filtered Export",
          "status": "passed",
          "details": "Filtered export records: 2"
        },
        {
          "test": "Export File Persistence",
          "status": "passed",
          "details": "Export files created: 11"
        },
        {
          "test": "CSV Format Validation",
          "status": "passed",
          "details": "CSV has header and 10 data rows"
        }
      ],
      "duration": 7,
      "endTime": "2025-08-12T02:21:32.553Z"
    },
    {
      "name": "Distribution Reporting and Insights",
      "startTime": "2025-08-12T02:21:32.545Z",
      "status": "passed",
      "validations": [
        {
          "test": "Report Generation",
          "status": "passed",
          "details": "Report structure complete"
        },
        {
          "test": "Metadata Completeness",
          "status": "failed",
          "details": "Total entries: 15, Unique providers: 5"
        },
        {
          "test": "Category Distribution",
          "status": "passed",
          "details": "Category distribution items: 6"
        },
        {
          "test": "Provider Distribution",
          "status": "passed",
          "details": "Provider distribution items: 5"
        },
        {
          "test": "Percentage Calculations",
          "status": "passed",
          "details": "All percentages within valid range"
        },
        {
          "test": "Insights Generation",
          "status": "passed",
          "details": "Generated insights: 3"
        },
        {
          "test": "Report Persistence",
          "status": "passed",
          "details": "Report files created: 7"
        }
      ],
      "report": {
        "metadata": {
          "generatedAt": "2025-08-12T02:21:32.554Z",
          "timeRange": {
            "hours": 24
          },
          "totalEntries": 15,
          "uniqueProviders": 5,
          "uniqueCategories": 6
        },
        "distributions": {
          "byCategory": [
            {
              "key": "stop",
              "count": 6,
              "percentage": "40.00"
            },
            {
              "key": "error",
              "count": 4,
              "percentage": "26.67"
            },
            {
              "key": "tool_calls",
              "count": 2,
              "percentage": "13.33"
            },
            {
              "key": "rate_limit",
              "count": 1,
              "percentage": "6.67"
            },
            {
              "key": "content_filter",
              "count": 1,
              "percentage": "6.67"
            },
            {
              "key": "length",
              "count": 1,
              "percentage": "6.67"
            }
          ],
          "byProvider": [
            {
              "key": "anthropic",
              "count": 4,
              "percentage": "26.67"
            },
            {
              "key": "error-test-provider",
              "count": 4,
              "percentage": "26.67"
            },
            {
              "key": "openai",
              "count": 3,
              "percentage": "20.00"
            },
            {
              "key": "codewhisperer",
              "count": 2,
              "percentage": "13.33"
            },
            {
              "key": "gemini",
              "count": 2,
              "percentage": "13.33"
            }
          ],
          "byFinishReason": [
            {
              "key": "stop",
              "count": 6,
              "percentage": "40.00"
            },
            {
              "key": "error",
              "count": 4,
              "percentage": "26.67"
            },
            {
              "key": "tool_calls",
              "count": 2,
              "percentage": "13.33"
            },
            {
              "key": "rate_limit",
              "count": 1,
              "percentage": "6.67"
            },
            {
              "key": "content_filter",
              "count": 1,
              "percentage": "6.67"
            },
            {
              "key": "length",
              "count": 1,
              "percentage": "6.67"
            }
          ],
          "byHour": [
            {
              "key": "10",
              "count": 8,
              "percentage": "53.33"
            },
            {
              "key": "15",
              "count": 7,
              "percentage": "46.67"
            }
          ]
        },
        "insights": [
          "Most common finish reason: stop (6 occurrences)",
          "Most active provider: anthropic (4 requests)",
          "Error rate: 26.67% (4 errors out of 15 total)"
        ]
      },
      "duration": 9,
      "endTime": "2025-08-12T02:21:32.554Z"
    },
    {
      "name": "Comprehensive System Integration",
      "startTime": "2025-08-12T02:21:32.546Z",
      "status": "passed",
      "validations": [
        {
          "test": "Scenario Processing",
          "status": "passed",
          "details": "Processed 10 scenarios"
        },
        {
          "test": "Comprehensive Reporting",
          "status": "passed",
          "details": "Categories: 6, Providers: 4"
        },
        {
          "test": "Complete Data Retrieval",
          "status": "passed",
          "details": "Retrieved 17 entries"
        },
        {
          "test": "System Persistence",
          "status": "passed",
          "details": "Loaded 13 entries from persistence"
        },
        {
          "test": "Complete System Export",
          "status": "passed",
          "details": "Export size: 2480 bytes"
        },
        {
          "test": "CLI System Integration",
          "status": "passed",
          "details": "CLI query returned 17 results"
        }
      ],
      "duration": 10,
      "endTime": "2025-08-12T02:21:32.556Z"
    },
    {
      "name": "Pattern Analysis and Alert System",
      "startTime": "2025-08-12T02:21:32.545Z",
      "status": "passed",
      "validations": [
        {
          "test": "Rate Limit Pattern Detection",
          "status": "passed",
          "details": "Alerts generated: 3"
        },
        {
          "test": "Error Rate Pattern Detection",
          "status": "passed",
          "details": "High error rate alert created"
        },
        {
          "test": "Alert Structure",
          "status": "passed",
          "details": "Alert has required fields"
        },
        {
          "test": "Alert Severity Assignment",
          "status": "passed",
          "details": "Alert severity: high"
        },
        {
          "test": "Alert Persistence",
          "status": "passed",
          "details": "Alert files created: 22"
        }
      ],
      "alertsGenerated": 6,
      "duration": 214,
      "endTime": "2025-08-12T02:21:32.759Z"
    }
  ],
  "summary": {
    "total": 9,
    "passed": 9,
    "failed": 0
  },
  "endTime": "2025-08-12T02:21:32.759Z"
}