{
  "sessionId": "lmstudio-tool-parsing-analysis-1754977830384",
  "timestamp": "2025-08-12T05:50:30.384Z",
  "testType": "lmstudio-tool-parsing-analysis",
  "results": [
    {
      "test": "captured-data-analysis",
      "status": "completed",
      "details": {
        "totalFiles": 40,
        "toolCallFiles": 40,
        "parsingIssues": 38,
        "uniquePatterns": [
          "standard",
          "prefix"
        ],
        "models": [
          "gemini-2.5-pro",
          "ZhipuAI/GLM-4.5",
          "Qwen/Qwen3-Coder-480B-A35B-Instruct"
        ]
      }
    },
    {
      "test": "pattern-recognition",
      "status": "passed",
      "details": {
        "totalTests": 5,
        "passed": 5,
        "results": [
          {
            "name": "standard-pattern",
            "success": true,
            "expected": "standard",
            "detected": [
              "standard",
              "prefix"
            ]
          },
          {
            "name": "prefix-pattern",
            "success": true,
            "expected": "prefix",
            "detected": [
              "standard",
              "prefix"
            ]
          },
          {
            "name": "function-pattern",
            "success": true,
            "expected": "function",
            "detected": [
              "function"
            ]
          },
          {
            "name": "json-pattern",
            "success": true,
            "expected": "json",
            "detected": [
              "json"
            ]
          },
          {
            "name": "complex-multiline",
            "success": true,
            "expected": "standard",
            "detected": [
              "standard",
              "prefix"
            ]
          }
        ]
      }
    },
    {
      "test": "parsing-logic-validation",
      "status": "failed",
      "details": {
        "textLength": 0,
        "patternsDetected": [],
        "hasProperStructure": false,
        "extractedToolCalls": 0,
        "toolCalls": []
      }
    },
    {
      "test": "fix-recommendations",
      "status": "completed",
      "details": {
        "totalRecommendations": 4,
        "byPriority": {
          "critical": 1,
          "high": 1,
          "medium": 2
        },
        "recommendations": [
          {
            "priority": "high",
            "category": "parsing-issues",
            "title": "修复工具调用解析问题",
            "description": "发现38个解析问题，工具调用被错误处理为文本",
            "solution": "实现缓冲式处理：完整收集响应后再进行工具调用解析，避免分段处理导致的错误",
            "implementation": "src/providers/openai/buffered-processor.ts"
          },
          {
            "priority": "medium",
            "category": "pattern-diversity",
            "title": "支持多种工具调用模式",
            "description": "检测到2种不同的工具调用模式",
            "solution": "增强模式识别器以支持所有检测到的模式格式",
            "implementation": "src/providers/openai/tool-call-analyzer.ts"
          },
          {
            "priority": "critical",
            "category": "extraction-failure",
            "title": "工具调用提取完全失败",
            "description": "无法从响应文本中提取任何工具调用",
            "solution": "重新设计提取逻辑，可能需要采用状态机或多阶段解析",
            "implementation": "complete parser redesign"
          },
          {
            "priority": "medium",
            "category": "lmstudio-specific",
            "title": "LM Studio兼容性优化",
            "description": "LM Studio使用OpenAI兼容API，但可能有特殊的响应格式",
            "solution": "添加LM Studio特定的预处理器，处理其独特的响应格式",
            "implementation": "src/providers/openai/lmstudio-preprocessor.ts"
          }
        ]
      }
    }
  ],
  "summary": {
    "total": 4,
    "passed": 1,
    "failed": 1,
    "completed": 2,
    "issuesFound": 38,
    "recommendations": 4,
    "criticalIssues": 1,
    "highIssues": 1
  }
}