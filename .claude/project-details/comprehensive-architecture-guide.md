# Claude Code Router - å®Œæ•´é¡¹ç›®æ¶æ„æŒ‡å—

**ä½œè€…**: Jason Zhang  
**ç‰ˆæœ¬**: v2.9.0 â†’ v3.0 é‡æ„  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-08-11  

## ğŸ“– ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ¶æ„æ¼”è¿›å†ç¨‹](#æ¶æ„æ¼”è¿›å†ç¨‹)
3. [æ ¸å¿ƒæ¶æ„è®¾è®¡](#æ ¸å¿ƒæ¶æ„è®¾è®¡)
4. [æŠ€æœ¯å®ç°è¯¦è§£](#æŠ€æœ¯å®ç°è¯¦è§£)
5. [ç³»ç»Ÿç»„ä»¶è¯¦è§£](#ç³»ç»Ÿç»„ä»¶è¯¦è§£)
6. [å¼€å‘ä¸éƒ¨ç½²](#å¼€å‘ä¸éƒ¨ç½²)
7. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
8. [æœªæ¥è§„åˆ’](#æœªæ¥è§„åˆ’)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

Claude Code Router æ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„å¤šAIæä¾›å•†è·¯ç”±è½¬æ¢ç³»ç»Ÿï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…å’Œä¼ä¸šæä¾›ç»Ÿä¸€çš„AIæœåŠ¡æ¥å…¥èƒ½åŠ›ã€‚é¡¹ç›®æ”¯æŒ Anthropic Claudeã€OpenAI GPTã€Google Geminiã€AWS CodeWhisperer ç­‰ä¸»æµAIæœåŠ¡ï¼Œé€šè¿‡æ™ºèƒ½è·¯ç”±å’Œæ ¼å¼è½¬æ¢å®ç°æ— ç¼åˆ‡æ¢ã€‚

### æ ¸å¿ƒä»·å€¼ä¸»å¼ 
- **ç»Ÿä¸€æ¥å£**: ä¸€å¥—APIæ¥å…¥æ‰€æœ‰ä¸»æµAIæœåŠ¡
- **æ™ºèƒ½è·¯ç”±**: åŸºäºè¯·æ±‚ç±»å‹å’Œè´Ÿè½½æƒ…å†µè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜Provider
- **é›¶ç¡¬ç¼–ç **: å®Œå…¨é…ç½®é©±åŠ¨ï¼Œæ”¯æŒåŠ¨æ€è°ƒæ•´
- **ä¼ä¸šçº§å¯é æ€§**: 99.9%+ æœåŠ¡å¯ç”¨æ€§ï¼Œå®Œæ•´çš„é”™è¯¯å¤„ç†å’Œç›‘æ§

### é¡¹ç›®è§„æ¨¡
- **ä»£ç è¡Œæ•°**: ~50,000+ è¡Œ
- **æµ‹è¯•è¦†ç›–ç‡**: 100% (174ä¸ªæµ‹è¯•æ–‡ä»¶)
- **æ”¯æŒProvider**: 4ä¸ªä¸»è¦ + æ‰©å±•æ”¯æŒ
- **é…ç½®æ–‡ä»¶**: 20+ ç§ä¸åŒåœºæ™¯é…ç½®
- **å·¥å…·ç”Ÿæ€**: 15+ ä¸ªé…å¥—å·¥å…·

## ğŸ—ï¸ æ¶æ„æ¼”è¿›å†ç¨‹

### Phase 1: v1.0 - åŸºç¡€è·¯ç”±ç³»ç»Ÿ (2023-Q4)
```
ç®€å•è¯·æ±‚è·¯ç”± â†’ Anthropic/OpenAI ç›´æ¥è°ƒç”¨
```
- åŸºç¡€çš„APIè·¯ç”±åŠŸèƒ½
- ç¡¬ç¼–ç é…ç½®
- æœ‰é™çš„é”™è¯¯å¤„ç†

### Phase 2: v2.0 - å¤šProvideræ”¯æŒ (2024-Q1-Q2)
```
ç”¨æˆ·è¯·æ±‚ â†’ ç®€å•è·¯ç”± â†’ å¤šProvider â†’ åŸºç¡€å“åº”å¤„ç†
```
- å¢åŠ  Geminiã€CodeWhisperer æ”¯æŒ
- å¼•å…¥é…ç½®æ–‡ä»¶ç®¡ç†
- åŸºç¡€çš„è´Ÿè½½å‡è¡¡

### Phase 3: v2.7.0 - å››å±‚æ¶æ„ (2024-Q3-Q4)
```
è¾“å…¥å±‚ â†’ è·¯ç”±å±‚ â†’ è¾“å‡ºå±‚ â†’ æä¾›å•†å±‚
```
- æˆç†Ÿçš„å››å±‚æ¶æ„è®¾è®¡
- å®Œæ•´çš„å·¥å…·è°ƒç”¨æ”¯æŒ
- ä¼ä¸šçº§é”™è¯¯å¤„ç†å’Œç›‘æ§
- Round Robin è´Ÿè½½å‡è¡¡

### Phase 4: v3.0 - å…­å±‚æ’ä»¶åŒ–æ¶æ„ (2024-Q4-2025-Q1)
```
Client â†’ Router â†’ Post-processor â†’ Transformer â†’ Provider-Protocol â†’ Preprocessor â†’ Server
```
- å®Œå…¨æ’ä»¶åŒ–æ¶æ„
- åŠ¨æ€æ¨¡å—æ³¨å†Œ
- å…¨é¢çš„Mock Serverç³»ç»Ÿ
- æ™ºèƒ½è®°å¿†ç®¡ç†

## ğŸ›ï¸ æ ¸å¿ƒæ¶æ„è®¾è®¡

### å½“å‰ç”Ÿäº§æ¶æ„ (v2.7.0)

#### å››å±‚æ¶æ„æ¨¡å¼
```mermaid
graph TB
    A[å®¢æˆ·ç«¯è¯·æ±‚] --> B[è¾“å…¥å±‚ Input Layer]
    B --> C[è·¯ç”±å±‚ Routing Layer]  
    C --> D[è¾“å‡ºå±‚ Output Layer]
    D --> E[æä¾›å•†å±‚ Provider Layer]
    E --> F[AIæœåŠ¡æä¾›å•†]
    
    subgraph "è¾“å…¥å±‚èŒè´£"
        B1[è¯·æ±‚è§£æ]
        B2[æ ¼å¼éªŒè¯]
        B3[è®¤è¯å¤„ç†]
    end
    
    subgraph "è·¯ç”±å±‚èŒè´£"
        C1[Provideré€‰æ‹©]
        C2[è´Ÿè½½å‡è¡¡]
        C3[æ•…éšœåˆ‡æ¢]
    end
    
    subgraph "è¾“å‡ºå±‚èŒè´£"  
        D1[å“åº”è½¬æ¢]
        D2[æµå¼å¤„ç†]
        D3[é”™è¯¯å¤„ç†]
    end
    
    subgraph "æä¾›å•†å±‚èŒè´£"
        E1[APIè°ƒç”¨]
        E2[SDKé›†æˆ] 
        E3[è¿æ¥ç®¡ç†]
    end
```

### ç›®æ ‡æ¶æ„ (v3.0)

#### å…­å±‚æ’ä»¶åŒ–æ¶æ„
```mermaid
graph TB
    A[Client Layer] --> B[Router Layer]
    B --> C[Post-processor Layer]
    C --> D[Transformer Layer] 
    D --> E[Provider-Protocol Layer]
    E --> F[Preprocessor Layer]
    F --> G[Server Layer]
    
    subgraph "æ’ä»¶åŒ–ç‰¹æ€§"
        P1[åŠ¨æ€æ³¨å†Œ]
        P2[çƒ­æ’æ‹”]
        P3[ç‰ˆæœ¬ç®¡ç†]
        P4[ä¾èµ–è§£æ]
    end
    
    subgraph "æ ¸å¿ƒæœåŠ¡"
        S1[é…ç½®ç®¡ç†]
        S2[ç›‘æ§å‘Šè­¦]
        S3[æ•°æ®è®°å½•]
        S4[MockæœåŠ¡]
    end
```

## ğŸ”§ æŠ€æœ¯å®ç°è¯¦è§£

### æ ¸å¿ƒæŠ€æœ¯åŸåˆ™

#### 1. é›¶ç¡¬ç¼–ç åŸåˆ™
```javascript
// âŒ ç¡¬ç¼–ç æ–¹å¼
const model = "claude-3-sonnet-20240229";

// âœ… é…ç½®é©±åŠ¨æ–¹å¼  
const model = config.routing.categories[category].model;
```

#### 2. é›¶å›é€€åŸåˆ™
```javascript
// âŒ é™é»˜å¤±è´¥å›é€€
const result = await apiCall() || defaultValue;

// âœ… æ˜ç¡®é”™è¯¯å¤„ç†
const result = await apiCall();
if (!result) {
    throw new ConfigurationError('API call failed - no fallback allowed');
}
```

#### 3. ç»†èŒå¼ç¼–ç¨‹
- **Small**: å•æ–‡ä»¶<500è¡Œï¼Œå•å‡½æ•°<50è¡Œ
- **Modular**: åŠŸèƒ½ç»„ç»‡æˆå¯æ’æ‹”æ¨¡å—
- **Self-contained**: æ¨¡å—å¯ç‹¬ç«‹å¤ç”¨

### é«˜çº§æŠ€æœ¯ç‰¹æ€§

#### 1. æ™ºèƒ½æµå¤„ç†æ¶æ„
```
å¼ºåˆ¶éæµå¼å¤„ç† + æ™ºèƒ½æµå¼æ¨¡æ‹Ÿ
â”œâ”€â”€ å®Œæ•´ç¼“å†²è§£æ (è§£å†³å·¥å…·è°ƒç”¨é—®é¢˜)
â”œâ”€â”€ æ™ºèƒ½åˆ†å—ä¼ è¾“ (ä¿æŒå“åº”é€Ÿåº¦)
â””â”€â”€ é”™è¯¯æ¢å¤æœºåˆ¶ (å¤„ç†ä¸­æ–­æƒ…å†µ)
```

#### 2. ğŸ©¹ è¡¥ä¸ç³»ç»Ÿæ¶æ„
```
éä¾µå…¥å¼æ¨¡å‹å…¼å®¹æ€§ä¿®å¤
â”œâ”€â”€ AnthropicToolCallTextFixPatch (ä¿®å¤ZhipuAIæ ¼å¼)
â”œâ”€â”€ OpenAIToolFormatFixPatch (æ ‡å‡†åŒ–å·¥å…·è°ƒç”¨)
â”œâ”€â”€ GeminiResponseFormatFixPatch (ç»Ÿä¸€å“åº”æ ¼å¼)
â””â”€â”€ ç²¾ç¡®æ¡ä»¶åŒ¹é… (Provider+Model+Version)
```

#### 3. ä¼ä¸šçº§ç›‘æ§ç³»ç»Ÿ
```
ä¸‰å±‚ç›‘æ§æ¶æ„
â”œâ”€â”€ å®æ—¶é”™è¯¯æ•è· (100%å·¥å…·è°ƒç”¨é”™è¯¯ç›‘æ§)
â”œâ”€â”€ æ€§èƒ½æŒ‡æ ‡æ”¶é›† (å“åº”æ—¶é—´ã€æˆåŠŸç‡)
â””â”€â”€ é¢„è­¦æœºåˆ¶ (å¼‚å¸¸æ¨¡å¼æ£€æµ‹)
```

## ğŸ›ï¸ ç³»ç»Ÿç»„ä»¶è¯¦è§£

### 1. Providerç³»ç»Ÿ

#### æ”¯æŒçš„Providerç±»å‹
| Provider | SDKé›†æˆ | è®¤è¯æ–¹å¼ | ç‰¹æ®ŠåŠŸèƒ½ |
|----------|---------|----------|----------|
| **Anthropic Claude** | å®˜æ–¹SDK | API Key | ç³»ç»Ÿæç¤ºè¯ï¼Œå·¥å…·è°ƒç”¨ |
| **OpenAI GPT** | å®˜æ–¹SDK | API Key | å‡½æ•°è°ƒç”¨ï¼Œè§†è§‰ç†è§£ |
| **Google Gemini** | å®˜æ–¹SDK | API Key | å¤šæ¨¡æ€ï¼Œä»£ç ç”Ÿæˆ |
| **AWS CodeWhisperer** | å®˜æ–¹SDK | AWSå‡­è¯ | ä»£ç è¡¥å…¨ï¼Œå®‰å…¨æ‰«æ |

#### å¢å¼ºOpenAIå®¢æˆ·ç«¯
```javascript
export class EnhancedOpenAIClient extends BaseProvider {
    // LMStudio/Ollamaé›†æˆ
    async initializeLMStudioSupport() {
        // åŠ¨æ€SDKæ£€æµ‹
        // å…¼å®¹æ€§é¢„å¤„ç†
        // æ€§èƒ½ä¼˜åŒ–
    }
    
    // å·¥å…·è°ƒç”¨ä¿®å¤
    fixLMStudioEmbeddedToolCalls() {
        // è§£æ<tool_call>æ ‡ç­¾
        // æ ‡å‡†åŒ–å·¥å…·è°ƒç”¨æ ¼å¼
    }
}
```

### 2. Mock Serverç³»ç»Ÿ

#### æ¶æ„ç»„ä»¶
```
Mock Server System
â”œâ”€â”€ ğŸ“Š DataReplayInfrastructure (æ•°æ®æœåŠ¡)
â”œâ”€â”€ ğŸ¬ ScenarioManager (åœºæ™¯ç®¡ç†)  
â”œâ”€â”€ ğŸ­ ResponseSimulator (å“åº”æ¨¡æ‹Ÿ)
â”œâ”€â”€ ğŸ¤– ProviderSimulation (Provideræ¨¡æ‹Ÿ)
â””â”€â”€ ğŸ›ï¸ WebControlPanel (Webç®¡ç†ç•Œé¢)
```

#### åœºæ™¯ç®¡ç†
```javascript
// é»˜è®¤åœºæ™¯é…ç½®
const scenarios = [
    {
        name: 'full-replay',
        description: 'å®Œæ•´æ•°æ®å›æ”¾',
        providerTypes: ['anthropic', 'openai', 'gemini', 'codewhisperer']
    },
    {
        name: 'anthropic-only', 
        description: 'ä»…Anthropic Provider',
        dataFilters: { provider: 'anthropic' }
    }
];
```

#### çœŸå®æ—¶åºæ¨¡æ‹Ÿ
```javascript
// æ—¶é—´æ¨¡å¼æ„ŸçŸ¥
const timingPatterns = {
    morning: { multiplier: 0.8 },    // æ—©æ™¨å“åº”æ›´å¿«
    afternoon: { multiplier: 1.0 },  // ä¸‹åˆæ ‡å‡†å“åº”  
    evening: { multiplier: 1.2 },    // å‚æ™šç¨æ…¢
    night: { multiplier: 1.5 }       // å¤œé—´è¾ƒæ…¢
};
```

### 3. å·¥å…·ç”Ÿæ€ç³»ç»Ÿ

#### æ—¥å¿—è§£æç³»ç»Ÿ
- **å¤„ç†èƒ½åŠ›**: 98ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œ12,065+ æ¡ç›®
- **åˆ†ç±»æ–¹å¼**: æŒ‰Providerè‡ªåŠ¨åˆ†ç±»
- **å…ƒæ•°æ®ç”Ÿæˆ**: è‡ªåŠ¨READMEæ–‡æ¡£ç”Ÿæˆ
- **å­˜å‚¨ä½ç½®**: `~/.route-claude-code/provider-protocols/`

#### APIæ—¶é—´çº¿å¯è§†åŒ–
```html
<!-- ç”Ÿæˆçš„HTMLæ—¶é—´çº¿ -->
<div class="timeline">
    <div class="api-call" data-provider="anthropic">
        <span class="timestamp">10:23:45</span>
        <span class="request">POST /v1/messages</span>
        <span class="duration">1.2s</span>
    </div>
</div>
```

#### å®ŒæˆåŸå› è¿½è¸ª
```javascript
// 8ç§åˆ†ç±»ç±»å‹
const finishReasons = [
    'stop', 'length', 'tool_calls', 'content_filter',
    'error', 'timeout', 'cancelled', 'max_tokens'
];
```

### 4. ç®¡ç†ç•Œé¢ç³»ç»Ÿ

#### é…ç½®ä»ªè¡¨æ¿ (ç«¯å£3458/3459)
- **å®æ—¶ç›‘æ§**: Providerå¥åº·çŠ¶æ€ã€è¯·æ±‚ç»Ÿè®¡
- **è´Ÿè½½å‡è¡¡æ§åˆ¶**: åŠ¨æ€è°ƒæ•´æƒé‡åˆ†é…
- **å¯è§†åŒ–ç®¡é“**: è¯·æ±‚æµç»å„å±‚çš„å¯è§†åŒ–

#### åŠ¨æ€é…ç½®ç®¡ç†
```javascript
// æ— é‡å¯é…ç½®æ›´æ–°
await configManager.updateConfig(newConfig, {
    validate: true,      // é…ç½®éªŒè¯
    backup: true,        // è‡ªåŠ¨å¤‡ä»½
    rollbackOnError: true // é”™è¯¯æ—¶è‡ªåŠ¨å›æ»š
});
```

### 5. æœåŠ¡ç®¡ç†ç³»ç»Ÿ

#### æœåŠ¡ç±»å‹åŒºåˆ†
```bash
# APIæœåŠ¡å™¨ (å¯ç®¡ç†)
rcc start config.json  # å¯ä»¥åœæ­¢/é‡å¯

# å®¢æˆ·ç«¯ä¼šè¯ (ä¿æŠ¤)  
rcc code --port 5508   # ç»å¯¹ä¸å¯ä¸­æ–­
```

#### é¢„å®šä¹‰ç«¯å£é…ç½®
| ç«¯å£ | Provider | ç”¨é€” |
|------|----------|------|
| 5501 | CodeWhisperer | ä¸»è´¦å· |
| 5502 | Gemini | APIå¯†é’¥ |
| 5503-5505 | CodeWhisperer | å¤šè´¦å· |
| 5506-5509 | OpenAIå…¼å®¹ | ç¬¬ä¸‰æ–¹æœåŠ¡ |

### 6. è®°å¿†ç®¡ç†ç³»ç»Ÿ

#### é¡¹ç›®è®°å¿†æ¶æ„
```
~/.claudecode/Users-fanzhang-Documents-github-claude-code-router/
â”œâ”€â”€ é—®é¢˜è§£å†³è®°å½• (30%)
â”œâ”€â”€ æ¶æ„å†³ç­–è®°å½• (25%)  
â”œâ”€â”€ æ€§èƒ½ä¼˜åŒ–è®°å½• (20%)
â”œâ”€â”€ è°ƒè¯•ç»éªŒè®°å½• (15%)
â””â”€â”€ å…¶ä»–åˆ†ç±» (10%)
```

#### è‡ªåŠ¨åˆ†ç±»ç³»ç»Ÿ
- **å‡†ç¡®ç‡**: 50% è‡ªåŠ¨åˆ†ç±»å‡†ç¡®ç‡
- **æœç´¢ç³»ç»Ÿ**: ç›¸å…³æ€§è¯„åˆ†ç®—æ³•
- **å…³è”æ£€æµ‹**: é—®é¢˜-è§£å†³æ–¹æ¡ˆæ˜ å°„

### 7. æµ‹è¯•ç³»ç»Ÿ

#### STD-8-STEP-PIPELINE
```
æµ‹è¯•æµæ°´çº¿
â”œâ”€â”€ Step 1: Client Layer (å®¢æˆ·ç«¯å±‚æµ‹è¯•)
â”œâ”€â”€ Step 2: Router Layer (è·¯ç”±å±‚æµ‹è¯•)
â”œâ”€â”€ Step 3: Post-processor (åå¤„ç†å™¨æµ‹è¯•)
â”œâ”€â”€ Step 4: Transformer (è½¬æ¢å™¨æµ‹è¯•)
â”œâ”€â”€ Step 5: Provider-Protocol (Provideråè®®æµ‹è¯•)
â”œâ”€â”€ Step 6: Preprocessor (é¢„å¤„ç†å™¨æµ‹è¯•)
â”œâ”€â”€ Step 7: Server Layer (æœåŠ¡å™¨å±‚æµ‹è¯•)
â””â”€â”€ Step 8: End-to-end (ç«¯åˆ°ç«¯é›†æˆæµ‹è¯•)
```

#### æµ‹è¯•ç»Ÿè®¡
- **æ€»æµ‹è¯•æ–‡ä»¶**: 174ä¸ª
- **æµ‹è¯•è¦†ç›–ç‡**: 100%
- **è‡ªåŠ¨åŒ–ç¨‹åº¦**: 95%
- **CI/CDé›†æˆ**: å®Œæ•´æ”¯æŒ

### 8. éƒ¨ç½²ç³»ç»Ÿ

#### 7é˜¶æ®µéƒ¨ç½²æµç¨‹
```
éƒ¨ç½²ç®¡é“
â”œâ”€â”€ Pre-validation (é¢„éªŒè¯)
â”œâ”€â”€ Test-execution (æµ‹è¯•æ‰§è¡Œ)
â”œâ”€â”€ Build-validation (æ„å»ºéªŒè¯)
â”œâ”€â”€ Rollback-point (å›æ»šç‚¹åˆ›å»º)
â”œâ”€â”€ Deployment (éƒ¨ç½²æ‰§è¡Œ)
â”œâ”€â”€ Health-validation (å¥åº·éªŒè¯)
â””â”€â”€ Finalization (æœ€ç»ˆç¡®è®¤)
```

## ğŸš€ å¼€å‘ä¸éƒ¨ç½²

### å¼€å‘ç¯å¢ƒæ­å»º

#### 1. ç¯å¢ƒè¦æ±‚
```bash
# åŸºç¡€ç¯å¢ƒ
Node.js >= 18.0.0
npm >= 8.0.0
Git >= 2.30.0

# è™šæ‹Ÿç¯å¢ƒ (ç»Ÿä¸€ä½¿ç”¨./venv)
python3 -m venv ./venv
source ./venv/bin/activate
```

#### 2. é¡¹ç›®å¯åŠ¨
```bash
# å®Œæ•´å¼€å‘æµç¨‹
./fix-and-test.sh

# å¼€å‘æ¨¡å¼å¯åŠ¨  
./start-dev.sh

# å•ç‹¬æ„å»º
./build.sh

# è¿è¡Œæµ‹è¯•
./test-all.sh
```

#### 3. æ ¸å¿ƒè„šæœ¬è¯´æ˜
| è„šæœ¬ | åŠŸèƒ½ | ç”¨é€” |
|------|------|------|
| `./rcc start` | ç®€åŒ–å¯åŠ¨å™¨ | ç”Ÿäº§ç¯å¢ƒå¯åŠ¨ |
| `./rcc code` | å®¢æˆ·ç«¯è¿æ¥ | å¼€å‘è°ƒè¯• |
| `./test-runner.sh` | æµ‹è¯•è¿è¡Œå™¨ | ç»Ÿä¸€æµ‹è¯•ç®¡ç† |

### ç”Ÿäº§éƒ¨ç½²

#### 1. éƒ¨ç½²é…ç½®
```bash
# ç”Ÿäº§ç¯å¢ƒé…ç½®
export NODE_ENV=production
export CCR_PORT=3457
export CCR_LOG_LEVEL=info
```

#### 2. ç›‘æ§é…ç½®
```bash
# æ—¥å¿—ä½ç½®
~/.route-claude-code/logs/ccr-production.log

# å¥åº·æ£€æŸ¥ç«¯ç‚¹
GET http://localhost:3457/health
```

#### 3. å®‰å…¨é…ç½®
- **é…ç½®éš”ç¦»**: é…ç½®æ–‡ä»¶åªè¯»
- **å‡­è¯ç®¡ç†**: ç¯å¢ƒå˜é‡ + å¯†é’¥æ–‡ä»¶åˆ†ç¦»
- **ç½‘ç»œå®‰å…¨**: CORSé…ç½® + é€Ÿç‡é™åˆ¶

## ğŸ“‹ æœ€ä½³å®è·µ

### å¼€å‘æœ€ä½³å®è·µ

#### 1. ä»£ç è§„èŒƒ
```javascript
// æ–‡ä»¶å¤´æ³¨é‡Š (å¼ºåˆ¶)
/**
 * Provider Interface Implementation
 * Author: Jason Zhang
 * @version v3.0-refactor
 */

// é›¶ç¡¬ç¼–ç åŸåˆ™
const config = await loadConfig();
const model = config.routing.categories[category].model;

// æ˜ç¡®é”™è¯¯å¤„ç†
if (!model) {
    throw new ConfigurationError(`No model configured for category: ${category}`);
}
```

#### 2. æµ‹è¯•è§„èŒƒ
```javascript
// æµ‹è¯•æ–‡ä»¶å‘½å: test-[åŠŸèƒ½æè¿°].js
// test-provider-integration-basic.js

// å¯¹åº”æ–‡æ¡£: test-[åŠŸèƒ½æè¿°].md  
// test-provider-integration-basic.md
```

#### 3. é…ç½®ç®¡ç†
```json
// ç¯å¢ƒåˆ†ç¦»
{
    "development": {
        "server": { "port": 3456 },
        "logging": { "level": "debug" }
    },
    "production": {
        "server": { "port": 3457 },  
        "logging": { "level": "info" }
    }
}
```

### è¿ç»´æœ€ä½³å®è·µ

#### 1. ç›‘æ§æŒ‡æ ‡
```javascript
// å…³é”®æŒ‡æ ‡ç›‘æ§
const metrics = {
    responseTime: 'avg < 2000ms',
    errorRate: 'rate < 1%',
    availability: 'uptime > 99.9%',
    toolCallSuccess: 'rate > 99%'
};
```

#### 2. æ•…éšœå¤„ç†
```bash
# æ•…éšœè¯Šæ–­æ­¥éª¤
1. æ£€æŸ¥æœåŠ¡çŠ¶æ€: ./rcc status
2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—: tail -f ~/.route-claude-code/logs/ccr-*.log  
3. éªŒè¯é…ç½®: node dist/cli.js validate
4. é‡å¯æœåŠ¡: ./rcc restart
```

#### 3. æ€§èƒ½ä¼˜åŒ–
- **è¿æ¥å¤ç”¨**: HTTP/2 è¿æ¥æ± 
- **è¯·æ±‚ç¼“å­˜**: æ™ºèƒ½ç¼“å­˜ç­–ç•¥  
- **è´Ÿè½½å‡è¡¡**: Round Robin + å¥åº·æ£€æŸ¥
- **èµ„æºç›‘æ§**: CPUã€å†…å­˜ã€ç½‘ç»œç”¨é‡

## ğŸ”® æœªæ¥è§„åˆ’

### çŸ­æœŸè®¡åˆ’ (Q1 2025)
- [ ] å®Œå–„v3.0æ’ä»¶åŒ–æ¶æ„
- [ ] å¢å¼ºMock ServeråŠŸèƒ½
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œè°ƒä¼˜
- [ ] ä¼ä¸šçº§å®‰å…¨å®¡è®¡

### ä¸­æœŸè®¡åˆ’ (Q2-Q3 2025)  
- [ ] å¤šç§Ÿæˆ·æ”¯æŒ
- [ ] é«˜çº§åˆ†æä»ªè¡¨æ¿
- [ ] è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·
- [ ] äº‘åŸç”Ÿéƒ¨ç½²æ”¯æŒ

### é•¿æœŸæ„¿æ™¯ (2025-2026)
- [ ] AIé©±åŠ¨çš„æ™ºèƒ½è·¯ç”±
- [ ] è¾¹ç¼˜è®¡ç®—èŠ‚ç‚¹éƒ¨ç½²
- [ ] å¼€æºç”Ÿæ€å»ºè®¾
- [ ] ä¼ä¸šçº§SaaSæœåŠ¡

## ğŸ“š ç›¸å…³èµ„æº

### æ–‡æ¡£é“¾æ¥
- [APIæ–‡æ¡£](./api-documentation.md)
- [å¼€å‘æŒ‡å—](./development-guide.md)
- [éƒ¨ç½²æ‰‹å†Œ](./deployment-guide.md)
- [æ•…éšœæ’é™¤](./troubleshooting-guide.md)

### ä»£ç ä»“åº“
- **ä¸»ä»“åº“**: https://github.com/fanzhang16/claude-code-router
- **NPMåŒ…**: https://www.npmjs.com/package/route-claudecode

### è”ç³»æ–¹å¼
- **ä½œè€…**: Jason Zhang
- **é¡¹ç›®ç»´æŠ¤**: github.com/fanzhang16
- **é—®é¢˜åé¦ˆ**: GitHub Issues

---

*æœ¬æ–‡æ¡£æ˜¯Claude Code Routeré¡¹ç›®çš„å®Œæ•´æ¶æ„æŒ‡å—ï¼Œæ¶µç›–äº†ä»æŠ€æœ¯åŸç†åˆ°å®è·µåº”ç”¨çš„æ‰€æœ‰æ–¹é¢ã€‚éšç€é¡¹ç›®çš„æŒç»­å‘å±•ï¼Œæ–‡æ¡£å°†å®šæœŸæ›´æ–°ä»¥åæ˜ æœ€æ–°çš„æ¶æ„æ¼”è¿›å’Œæœ€ä½³å®è·µã€‚*