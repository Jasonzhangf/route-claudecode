# RCC v4.0 模块化架构设计

## 概述

RCC v4.0 采用严格的三层模块化架构设计：
1. **客户端模块** (Client Module) - 处理CLI命令、用户交互和错误处理
2. **路由器模块** (Router Module) - 处理配置管理、请求路由和负载均衡
3. **流水线模块** (Pipeline Module) - 处理11模块流水线的动态管理和执行

## 模块架构图

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   客户端模块     │───▶│   路由器模块     │───▶│  流水线Worker   │
│   (Client)      │    │   (Router)      │    │  (Pipeline)     │
│  CLI + HTTP     │    │ 路由 + 流控     │    │ 4层处理链      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         └───────────────────────┼───────────────────────┘
                                 ▼
┌─────────────────────────────────────────────────────────────────┐
│              支撑系统模块 (Config + Debug + ErrorHandler)        │
└─────────────────────────────────────────────────────────────────┘
                                 │
                                 ▼
                    ┌─────────────────┐
                    │   核心类型定义   │
                    │   (Types)       │
                    └─────────────────┘
```

## 模块详细说明

### 1. 客户端模块 (src/client/)
处理CLI命令、用户交互和错误处理

### 2. 路由器模块 (src/router/)
处理配置管理、请求路由和负载均衡

### 3. 流水线模块 (src/pipeline/)
处理11模块流水线的动态管理和执行

### 4. 支撑模块
- Debug系统 (src/debug/) - 数据记录、回放测试和调试支持
- 配置系统 (src/config/) - 配置加载和管理
- 错误处理系统 (src/error-handler/) - 统一错误处理