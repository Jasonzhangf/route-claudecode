{
  "timestamp": "2025-07-26T12:47:43.539Z",
  "testType": "CodeWhisperer路由测试",
  "summary": {
    "total": 4,
    "passed": 2,
    "failed": 2,
    "successRate": 50
  },
  "routingResults": [
    {
      "name": "simple-background-task",
      "success": true,
      "expectedProvider": "shuaihong-openai",
      "actualProvider": "shuaihong-openai",
      "duration": 3211,
      "responseData": {
        "status": 200,
        "model": "gemini-2.5-flash",
        "id": "chatcmpl-20250726204722692648155nSbaMk3i",
        "contentLength": 2,
        "hasContent": false,
        "usage": {
          "input_tokens": 2,
          "output_tokens": 49
        }
      }
    },
    {
      "name": "code-generation-task",
      "success": false,
      "expectedProvider": "codewhisperer-primary",
      "actualProvider": "shuaihong-openai",
      "duration": 2925,
      "responseData": {
        "status": 200,
        "model": "gemini-2.5-flash",
        "id": "chatcmpl-20250726204725187690834iwnFvG2S",
        "contentLength": 2,
        "hasContent": false,
        "usage": {
          "input_tokens": 8,
          "output_tokens": 49
        }
      }
    },
    {
      "name": "thinking-intensive-task",
      "success": true,
      "expectedProvider": "shuaihong-openai",
      "actualProvider": "shuaihong-openai",
      "duration": 2263,
      "responseData": {
        "status": 200,
        "model": "gemini-2.5-flash",
        "id": "chatcmpl-20250726204727889590427hqbrDzb8",
        "contentLength": 2,
        "hasContent": false,
        "usage": {
          "input_tokens": 9,
          "output_tokens": 49
        }
      }
    },
    {
      "name": "long-context-task",
      "success": false,
      "error": "Request failed with status code 500",
      "duration": 13960
    }
  ],
  "configuration": {
    "server": "http://127.0.0.1:3456",
    "modelMappings": {
      "claude-3-5-haiku-20241022": {
        "expectedCategory": "background",
        "expectedProvider": "shuaihong-openai",
        "expectedTargetModel": "gemini-2.5-flash"
      },
      "claude-3-5-sonnet-20241022": {
        "expectedCategory": "default",
        "expectedProvider": "codewhisperer-primary",
        "expectedTargetModel": "CLAUDE_SONNET_4_20250514_V1_0"
      },
      "claude-sonnet-4-20250514": {
        "expectedCategory": "default",
        "expectedProvider": "codewhisperer-primary",
        "expectedTargetModel": "CLAUDE_SONNET_4_20250514_V1_0"
      }
    },
    "routingTests": [
      {
        "name": "simple-background-task",
        "description": "简单后台任务路由测试",
        "input": {
          "model": "claude-3-5-haiku-20241022",
          "messages": [
            {
              "role": "user",
              "content": "Hello"
            }
          ]
        },
        "expectsProvider": "shuaihong-openai"
      },
      {
        "name": "code-generation-task",
        "description": "代码生成任务路由测试",
        "input": {
          "model": "claude-3-5-sonnet-20241022",
          "messages": [
            {
              "role": "user",
              "content": "Write a function to sort an array"
            }
          ]
        },
        "expectsProvider": "codewhisperer-primary"
      },
      {
        "name": "thinking-intensive-task",
        "description": "思维密集型任务路由测试",
        "input": {
          "model": "claude-3-opus-20240229",
          "messages": [
            {
              "role": "user",
              "content": "Explain the philosophical implications of artificial intelligence consciousness"
            }
          ]
        },
        "expectsProvider": "shuaihong-openai"
      },
      {
        "name": "long-context-task",
        "description": "长上下文任务路由测试",
        "input": {
          "model": "claude-3-5-sonnet-20241022",
          "messages": [
            {
              "role": "user",
              "content": "Message 1: This is a long conversation to test routing"
            },
            {
              "role": "assistant",
              "content": "Message 2: This is a long conversation to test routing"
            },
            {
              "role": "user",
              "content": "Message 3: This is a long conversation to test routing"
            },
            {
              "role": "assistant",
              "content": "Message 4: This is a long conversation to test routing"
            },
            {
              "role": "user",
              "content": "Message 5: This is a long conversation to test routing"
            },
            {
              "role": "assistant",
              "content": "Message 6: This is a long conversation to test routing"
            },
            {
              "role": "user",
              "content": "Message 7: This is a long conversation to test routing"
            },
            {
              "role": "assistant",
              "content": "Message 8: This is a long conversation to test routing"
            },
            {
              "role": "user",
              "content": "Message 9: This is a long conversation to test routing"
            },
            {
              "role": "assistant",
              "content": "Message 10: This is a long conversation to test routing"
            },
            {
              "role": "user",
              "content": "Message 11: This is a long conversation to test routing"
            },
            {
              "role": "assistant",
              "content": "Message 12: This is a long conversation to test routing"
            },
            {
              "role": "user",
              "content": "Message 13: This is a long conversation to test routing"
            },
            {
              "role": "assistant",
              "content": "Message 14: This is a long conversation to test routing"
            },
            {
              "role": "user",
              "content": "Message 15: This is a long conversation to test routing"
            },
            {
              "role": "assistant",
              "content": "Message 16: This is a long conversation to test routing"
            },
            {
              "role": "user",
              "content": "Message 17: This is a long conversation to test routing"
            },
            {
              "role": "assistant",
              "content": "Message 18: This is a long conversation to test routing"
            },
            {
              "role": "user",
              "content": "Message 19: This is a long conversation to test routing"
            },
            {
              "role": "assistant",
              "content": "Message 20: This is a long conversation to test routing"
            }
          ]
        },
        "expectsProvider": "codewhisperer-primary"
      }
    ]
  },
  "recommendations": [
    {
      "type": "routing-mismatch",
      "description": "路由不匹配问题",
      "details": [
        {
          "test": "code-generation-task",
          "expected": "codewhisperer-primary",
          "actual": "shuaihong-openai"
        },
        {
          "test": "long-context-task"
        }
      ],
      "suggestion": "检查路由规则配置，确保模型映射正确"
    },
    {
      "type": "performance",
      "description": "响应时间较长",
      "avgDuration": "5589.75ms",
      "suggestion": "考虑优化路由性能或增加超时设置"
    }
  ]
}