# Route Claude Code (RCC) v4.0 ğŸš€

é«˜æ€§èƒ½ã€æ¨¡å—åŒ–çš„å¤šAIæä¾›å•†è·¯ç”±è½¬æ¢ç³»ç»Ÿ - å®Œå…¨é‡æ„ç‰ˆ

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

RCC v4.0 æ˜¯ä¸€ä¸ªåŸºäº TypeScript çš„ç°ä»£åŒ–AIè·¯ç”±ä»£ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§AIæä¾›å•†çš„æ— ç¼é›†æˆå’Œæ™ºèƒ½è·¯ç”±ã€‚é‡‡ç”¨ä¸¥æ ¼æ¨¡å—åŒ–æ¶æ„ï¼Œæä¾›ä¼ä¸šçº§çš„å¯é æ€§å’Œæ€§èƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ—ï¸ **ä¸¥æ ¼æ¨¡å—åŒ–æ¶æ„** - 11æ¨¡å—æ ‡å‡†æµæ°´çº¿ï¼ŒèŒè´£æ¸…æ™°åˆ†ç¦»
- ğŸ”„ **æ™ºèƒ½è·¯ç”±ç³»ç»Ÿ** - åŸºäºæƒé‡ã€è´Ÿè½½å‡è¡¡çš„åŠ¨æ€è·¯ç”±
- ğŸš€ **é«˜æ€§èƒ½è®¾è®¡** - <100ms å¤„ç†å»¶è¿Ÿï¼Œ<200MB å†…å­˜å ç”¨
- ğŸ›¡ï¸ **é›¶å¤±è´¥å®¹å¿** - æ— é™é»˜å¤±è´¥ï¼Œå®Œæ•´é”™è¯¯è¿½è¸ªé“¾
- ğŸ§ª **çœŸå®æµæ°´çº¿æµ‹è¯•** - Debugç³»ç»Ÿæ”¯æŒæ•°æ®æ•è·å’Œå›æ”¾
- ğŸ›ï¸ **åŒæ¨¡å¼CLI** - Serveræ¨¡å¼å’ŒClientæ¨¡å¼çµæ´»åˆ‡æ¢

### æ”¯æŒçš„AIæä¾›å•†

- âœ… **LM Studio** (ä¼˜å…ˆæ”¯æŒ) - OpenAIå…¼å®¹åè®®
- ğŸ”„ **OpenAI** (è®¡åˆ’æ”¯æŒ) - å®˜æ–¹API
- ğŸ”„ **Anthropic** (è®¡åˆ’æ”¯æŒ) - Claude API
- ğŸ”„ **Google Gemini** (è®¡åˆ’æ”¯æŒ) - Gemini API

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- Node.js >= 18.0.0
- TypeScript >= 5.5.0
- å†…å­˜ >= 512MB

### å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/fanzhang16/route-claudecode.git
cd route-claudecode/workspace/main-development

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# å¤åˆ¶é…ç½®æ–‡ä»¶
cp .env.example .env
cp config/examples/config.example.json ~/.route-claudecode/config/config.json
```

### åŸºç¡€ä½¿ç”¨

```bash
# å¯åŠ¨æœåŠ¡å™¨æ¨¡å¼ (ç‹¬ç«‹è¿è¡Œ)
rcc4 start

# å¯åŠ¨å®¢æˆ·ç«¯æ¨¡å¼ (é€æ˜ä»£ç†Claude Code)
rcc4 code

# æŸ¥çœ‹çŠ¶æ€
rcc4 status

# åœæ­¢æœåŠ¡
rcc4 stop
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### å››å¤§æ ¸å¿ƒæ¨¡å—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client        â”‚â”€â”€â”€â”€â”‚    Router       â”‚â”€â”€â”€â”€â”‚   Pipeline      â”‚â”€â”€â”€â”€â”‚    Debug        â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚    Worker       â”‚    â”‚    System       â”‚
â”‚ â€¢ CLI System    â”‚    â”‚ â€¢ Config Mgmt   â”‚    â”‚ â€¢ Transformer   â”‚    â”‚ â€¢ Data Capture  â”‚
â”‚ â€¢ Error Handler â”‚    â”‚ â€¢ Request Route â”‚    â”‚ â€¢ Protocol      â”‚    â”‚ â€¢ Replay System â”‚
â”‚ â€¢ User Interfaceâ”‚    â”‚ â€¢ Load Balance  â”‚    â”‚ â€¢ Server-Compat â”‚    â”‚ â€¢ Unit Testing  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11æ¨¡å—æµæ°´çº¿æ¶æ„

æ¯ä¸ªProvideréƒ½æœ‰ç‹¬ç«‹çš„æµæ°´çº¿å®ä¾‹ï¼š

1. **Router** - è·¯ç”±å†³ç­–å’ŒProvideré€‰æ‹©
2. **Input Transformer** - è¾“å…¥æ ¼å¼è½¬æ¢ (Anthropic â†’ Standard)
3. **Format Normalizer** - æ¶ˆæ¯å’Œå·¥å…·æ ¼å¼ç»Ÿä¸€
4. **Provider Preprocessor** - Providerç‰¹å®šé¢„å¤„ç†
5. **Protocol Interface** - åè®®å±‚æ¥å£ (OpenAI/Anthropic/etc)
6. **Response Interceptor** - å“åº”æ‹¦æˆªå’ŒéªŒè¯
7. **Provider Postprocessor** - Providerç‰¹å®šåå¤„ç†
8. **Output Transformer** - è¾“å‡ºæ ¼å¼è½¬æ¢ (Standard â†’ Anthropic)
9. **Debug Module** - è°ƒè¯•æ•°æ®è®°å½• (å¯é€‰)
10. **Error Capture** - é”™è¯¯æ•è·ç³»ç»Ÿ (å¯é€‰)
11. **Unit Test** - å•å…ƒæµ‹è¯•æ”¯æŒ (å¯é€‰)

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ types/              # æ ¸å¿ƒç±»å‹å®šä¹‰
â”œâ”€â”€ client/             # å®¢æˆ·ç«¯æ¨¡å— (CLI, æœåŠ¡å™¨ç®¡ç†)
â”œâ”€â”€ router/             # è·¯ç”±å™¨æ¨¡å— (é…ç½®, è·¯ç”±, è´Ÿè½½å‡è¡¡)
â”œâ”€â”€ pipeline/           # æµæ°´çº¿Worker (åŠ¨æ€ç®¡ç†, 11æ¨¡å—æµæ°´çº¿)
â”œâ”€â”€ debug/              # Debugç³»ç»Ÿ (æ•°æ®è®°å½•, å›æ”¾æµ‹è¯•)
â”œâ”€â”€ utils/              # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ interfaces/         # æ¥å£å®šä¹‰
â”œâ”€â”€ modules/            # å¯å¤ç”¨æ¨¡å—
â””â”€â”€ __tests__/          # å•å…ƒæµ‹è¯•

config/
â”œâ”€â”€ examples/           # ç¤ºä¾‹é…ç½®æ–‡ä»¶
â”œâ”€â”€ providers/          # Provideré…ç½®
â”œâ”€â”€ routing/            # è·¯ç”±é…ç½®
â””â”€â”€ generated/          # åŠ¨æ€ç”Ÿæˆçš„é…ç½®

tests/
â”œâ”€â”€ unit/               # å•å…ƒæµ‹è¯•
â”œâ”€â”€ integration/        # é›†æˆæµ‹è¯•
â”œâ”€â”€ e2e/                # ç«¯åˆ°ç«¯æµ‹è¯•
â””â”€â”€ fixtures/           # æµ‹è¯•æ•°æ®
```

## ğŸ§ª å¼€å‘å’Œæµ‹è¯•

### å¼€å‘æ¨¡å¼

```bash
# å¼€å‘æ¨¡å¼è¿è¡Œ (è‡ªåŠ¨é‡å»º)
npm run dev

# ä»£ç æ£€æŸ¥
npm run lint

# è‡ªåŠ¨ä¿®å¤ä»£ç æ ¼å¼
npm run lint:fix
```

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# ç›‘å¬æ¨¡å¼æµ‹è¯•
npm run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### éªŒæ”¶æ ‡å‡†

æ ¹æ® `tasks.md` ä¸­çš„è¦æ±‚ï¼Œæ¯ä¸ªä»»åŠ¡å¿…é¡»æ»¡è¶³ï¼š

- âœ… **ä»£ç è´¨é‡**: TypeScriptä¸¥æ ¼æ¨¡å¼ç¼–è¯‘é€šè¿‡ï¼ŒESLintæ— é”™è¯¯
- âœ… **æµ‹è¯•è¦†ç›–**: å•å…ƒæµ‹è¯•â‰¥80%ï¼Œé›†æˆæµ‹è¯•â‰¥90%ï¼Œç«¯åˆ°ç«¯æµ‹è¯•=100%
- âœ… **çœŸå®APIæµ‹è¯•**: ä¸LM Studioçš„çœŸå®APIè°ƒç”¨æµ‹è¯•é€šè¿‡
- âœ… **æ€§èƒ½åŸºå‡†**: å“åº”å»¶è¿Ÿ<100msï¼Œå†…å­˜ä½¿ç”¨<200MB
- âœ… **æ–‡æ¡£æ›´æ–°**: ä»£ç æ³¨é‡Šã€APIæ–‡æ¡£ã€ç”¨æˆ·æ–‡æ¡£åŒæ­¥æ›´æ–°
- âœ… **å®‰å…¨æ£€æŸ¥**: æ— å®‰å…¨æ¼æ´ï¼Œè¾“å…¥éªŒè¯å®Œæ•´

## ğŸ“‹ å¼€å‘è®¡åˆ’

å½“å‰å¤„äº **Phase 1: æ ¸å¿ƒæ¶æ„è®¾è®¡ä¸å®ç°** é˜¶æ®µ

### å®ŒæˆçŠ¶æ€

- âœ… **Task 1.1**: é¡¹ç›®åˆå§‹åŒ–å’Œç»“æ„è®¾ç½®
- â³ **Task 1.2**: æ ¸å¿ƒæ¥å£å®šä¹‰å’Œç±»å‹ç³»ç»Ÿ
- â³ **Task 1.3**: CLIæ¡†æ¶å’Œå‘½ä»¤ç³»ç»Ÿ
- â³ **Task 1.4**: åŸºç¡€æ¨¡å—ç®¡ç†å™¨å®ç°

è¯¦ç»†ä»»åŠ¡è®¡åˆ’è¯·å‚è€ƒ [tasks.md](./tasks.md)

## ğŸ¤ å¼€å‘è§„èŒƒ

### å¼ºåˆ¶æ‰§è¡Œè§„åˆ™

æ ¹æ® `CLAUDE.md` ä¸­çš„è§„å®šï¼š

1. **ä»»åŠ¡æ‰§è¡Œå‰æ£€æŸ¥** - å¿…é¡»æ£€æŸ¥ `tasks.md` ä¸­çš„ä»»åŠ¡çŠ¶æ€å’Œä¾èµ–
2. **å¼€å‘è¿‡ç¨‹çº¦æŸ** - é›¶ä»£ç é‡å¤ï¼Œæ¥å£ä¼˜å…ˆï¼Œæµ‹è¯•é©±åŠ¨
3. **å®Œæˆå‰éªŒè¯** - å•å…ƒæµ‹è¯•80%+ï¼ŒçœŸå®APIæµ‹è¯•ï¼Œæ€§èƒ½åŸºå‡†
4. **ä»»åŠ¡å®Œæˆç¡®è®¤** - æ›´æ–°çŠ¶æ€ï¼Œè®°å½•æµ‹è¯•æŠ¥å‘Šï¼Œä»£ç å®¡æŸ¥

### æ¨¡å—è¾¹ç•Œ

- ä¸¥æ ¼æ¨¡å—åŒ–ï¼šæ¯ä¸ªæ¨¡å—åªèƒ½åœ¨èŒè´£èŒƒå›´å†…å·¥ä½œ
- æ¥å£é€šä¿¡ï¼šæ¨¡å—é—´åªèƒ½é€šè¿‡å®šä¹‰çš„æ¥å£é€šä¿¡
- ä¸å…è®¸è·¨æ¨¡å—ï¼šä¸èƒ½ç›´æ¥è°ƒç”¨å…¶ä»–æ¨¡å—çš„å†…éƒ¨æ–¹æ³•

### é”™è¯¯å¤„ç†

- ä¸å…è®¸é™é»˜å¤±è´¥ï¼šæ‰€æœ‰é”™è¯¯å¿…é¡»æŠ›å‡º
- ç»Ÿä¸€é”™è¯¯æ ¼å¼ï¼šä½¿ç”¨RCCErrorç±»å‹
- å®Œæ•´é”™è¯¯é“¾ï¼šä¿æŒé”™è¯¯è¿½è¸ªé“¾å®Œæ•´

## ğŸ“š æ–‡æ¡£

- [é¡¹ç›®è§„æ ¼ä¹¦](.claude/project-details/rcc-v4-specification.md)
- [è¯¦ç»†è®¾è®¡](.claude/project-details/rcc-v4-detailed-design.md)
- [é¡¹ç›®ç»“æ„](.claude/project-details/rcc-v4-project-structure.md)
- [ä»»åŠ¡è®¡åˆ’](./tasks.md)
- [å¼€å‘è§„èŒƒ](./CLAUDE.md)

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

è¯·ç¡®ä¿ï¼š
1. éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒ
2. æ·»åŠ é€‚å½“çš„æµ‹è¯•
3. æ›´æ–°ç›¸å…³æ–‡æ¡£
4. é€šè¿‡æ‰€æœ‰è´¨é‡æ£€æŸ¥

---

**é¡¹ç›®ç‰ˆæœ¬**: v4.0.0-alpha.1  
**æœ€åæ›´æ–°**: 2025-08-15  
**å¼€å‘çŠ¶æ€**: ğŸš§ å¼€å‘ä¸­ - Phase 1