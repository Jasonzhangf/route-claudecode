/**
 * Routing Table Types - RCC v4.0 Configuration System
 * 
 * 定义路由表的标准数据结构和预处理结果类型
 * 支持从配置文件到路由表的转换过程中的所有数据类型
 * 
 * @author RCC v4.0 - Zero Interface Exposure Architecture
 */

/**
 * Provider信息接口
 */
export interface ProviderInfo {
  name: string;
  priority?: number;
  api_base_url: string;
  api_key: string;
  models: string[];
  serverCompatibility?: {
    use: string;
    options: Record<string, any>;
  };
}

/**
 * 路由映射接口
 */
export interface RouteMapping {
  [routeName: string]: string; // routeName -> "provider,model" format
}

/**
 * 服务器配置接口
 */
export interface ServerInfo {
  port: number;
  host: string;
  debug?: boolean;
}

/**
 * 标准路由表接口
 */
export interface RoutingTable {
  providers: ProviderInfo[];
  routes: RouteMapping;
  server: ServerInfo;
  apiKey: string;
  version?: string;
  description?: string;
  lastUpdated?: string;
}

/**
 * 配置预处理结果接口
 */
export interface ConfigPreprocessResult {
  success: boolean;
  routingTable?: RoutingTable;
  error?: {
    code: string;
    message: string;
    details?: any;
  };
  metadata: {
    configPath: string;
    processingTime: number;
    timestamp: string;
    sourceFormat: 'v4' | 'basic' | 'unknown';
  };
}

/**
 * 配置文件格式检测结果
 */
export interface ConfigFormatDetectionResult {
  format: 'v4' | 'basic' | 'unknown';
  version?: string;
  confidence: number;
  reasons: string[];
}

/**
 * Provider扩展结果
 */
export interface ProviderExpansionResult {
  expandedProviders: ProviderInfo[];
  warnings: string[];
  errors: string[];
}

/**
 * 路由生成结果
 */
export interface RouteGenerationResult {
  routes: RouteMapping;
  autoGenerated: string[];
  warnings: string[];
}