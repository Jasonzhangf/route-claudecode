{
	"timestamp": "2025-09-04T03:00:16.233Z",
	"port": 5506,
	"requestId": "sim_1756954816233_bid5hklya",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.249Z",
	"port": 5506,
	"requestId": "sim_1756954816233_bid5hklya",
	"output": {
		"id": "msg_sim_1756954816233_bid5hklya",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 16,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.6
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.6
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:16.255Z",
	"port": 5506,
	"requestId": "sim_1756954816255_4k19727w2",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.280Z",
	"port": 5506,
	"requestId": "sim_1756954816255_4k19727w2",
	"processingTime": 25,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756954816261
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:16.286Z",
	"port": 5506,
	"requestId": "sim_1756954816286_8we3o25d3",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.298Z",
	"port": 5506,
	"requestId": "sim_1756954816286_8we3o25d3",
	"output": {
		"id": "msg_sim_1756954816286_8we3o25d3",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:16.303Z",
	"port": 5506,
	"requestId": "sim_1756954816303_4ex705rqe",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.308Z",
	"port": 5506,
	"requestId": "sim_1756954816303_4ex705rqe",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756954816307
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:16.314Z",
	"port": 5506,
	"requestId": "sim_1756954816314_m307x55eu",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.328Z",
	"port": 5506,
	"requestId": "sim_1756954816314_m307x55eu",
	"output": {
		"id": "msg_sim_1756954816314_m307x55eu",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 14,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:16.333Z",
	"port": 5506,
	"requestId": "sim_1756954816333_qe8x4c8hs",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.346Z",
	"port": 5506,
	"requestId": "sim_1756954816333_qe8x4c8hs",
	"output": {
		"id": "msg_sim_1756954816333_qe8x4c8hs",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:16.350Z",
	"port": 5506,
	"requestId": "sim_1756954816350_2mu72ho9l",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.355Z",
	"port": 5506,
	"requestId": "sim_1756954816350_2mu72ho9l",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756954816354
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:16.359Z",
	"port": 5506,
	"requestId": "sim_1756954816359_qwc16evri",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.365Z",
	"port": 5506,
	"requestId": "sim_1756954816359_qwc16evri",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756954816364
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:16.370Z",
	"port": 5506,
	"requestId": "sim_1756954816370_t5cznxp4j",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.376Z",
	"port": 5506,
	"requestId": "sim_1756954816370_t5cznxp4j",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756954816375
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:16.381Z",
	"port": 5506,
	"requestId": "sim_1756954816381_8enjpkc32",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.385Z",
	"port": 5506,
	"requestId": "sim_1756954816381_8enjpkc32",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756954816385
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:16.390Z",
	"port": 5506,
	"requestId": "sim_1756954816390_cc7eluwcw",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:16.395Z",
	"port": 5506,
	"requestId": "sim_1756954816390_cc7eluwcw",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756954816395
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:25.932Z",
	"port": 5506,
	"requestId": "sim_1756954825932_wsupi0i4j",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:25.936Z",
	"port": 5506,
	"requestId": "sim_1756954825932_wsupi0i4j",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:25.939Z",
	"port": 5506,
	"requestId": "sim_1756954825939_1y1qv38m3",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:25.953Z",
	"port": 5506,
	"requestId": "sim_1756954825939_1y1qv38m3",
	"processingTime": 14,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756954825942
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:25.956Z",
	"port": 5506,
	"requestId": "sim_1756954825956_7gippzgmv",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:25.960Z",
	"port": 5506,
	"requestId": "sim_1756954825956_7gippzgmv",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756954825959
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:00:25.965Z",
	"port": 5506,
	"requestId": "sim_1756954825965_93u11p1rp",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:00:25.969Z",
	"port": 5506,
	"requestId": "sim_1756954825965_93u11p1rp",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756954825968
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.583Z",
	"port": 5506,
	"requestId": "sim_1756955231583_a0mgilvq9",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.640Z",
	"port": 5506,
	"requestId": "sim_1756955231583_a0mgilvq9",
	"output": {
		"id": "msg_sim_1756955231583_a0mgilvq9",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 57,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 5.7
		},
		"outputValidation": {
			"success": true,
			"processingTime": 5.7
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.652Z",
	"port": 5506,
	"requestId": "sim_1756955231652_ub11g53or",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.682Z",
	"port": 5506,
	"requestId": "sim_1756955231652_ub11g53or",
	"processingTime": 30,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756955231658
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.690Z",
	"port": 5506,
	"requestId": "sim_1756955231690_9kca7f2n9",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.706Z",
	"port": 5506,
	"requestId": "sim_1756955231690_9kca7f2n9",
	"output": {
		"id": "msg_sim_1756955231690_9kca7f2n9",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 16,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.6
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.6
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.713Z",
	"port": 5506,
	"requestId": "sim_1756955231713_5p70nfv1j",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.718Z",
	"port": 5506,
	"requestId": "sim_1756955231713_5p70nfv1j",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756955231717
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.724Z",
	"port": 5506,
	"requestId": "sim_1756955231724_jxn2vg0p4",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.736Z",
	"port": 5506,
	"requestId": "sim_1756955231724_jxn2vg0p4",
	"output": {
		"id": "msg_sim_1756955231724_jxn2vg0p4",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.746Z",
	"port": 5506,
	"requestId": "sim_1756955231746_7wpl9br8u",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.761Z",
	"port": 5506,
	"requestId": "sim_1756955231746_7wpl9br8u",
	"output": {
		"id": "msg_sim_1756955231746_7wpl9br8u",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 15,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.5
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.5
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.766Z",
	"port": 5506,
	"requestId": "sim_1756955231766_ym667ti04",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.772Z",
	"port": 5506,
	"requestId": "sim_1756955231766_ym667ti04",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756955231771
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.777Z",
	"port": 5506,
	"requestId": "sim_1756955231777_n9xnsbi9m",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.784Z",
	"port": 5506,
	"requestId": "sim_1756955231777_n9xnsbi9m",
	"processingTime": 7,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756955231783
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.791Z",
	"port": 5506,
	"requestId": "sim_1756955231791_juascg34u",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.797Z",
	"port": 5506,
	"requestId": "sim_1756955231791_juascg34u",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756955231797
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.803Z",
	"port": 5506,
	"requestId": "sim_1756955231803_tak411v5s",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.807Z",
	"port": 5506,
	"requestId": "sim_1756955231803_tak411v5s",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756955231807
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:11.812Z",
	"port": 5506,
	"requestId": "sim_1756955231812_du9yl5zcg",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:11.817Z",
	"port": 5506,
	"requestId": "sim_1756955231812_du9yl5zcg",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756955231817
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:21.220Z",
	"port": 5506,
	"requestId": "sim_1756955241220_5pkpsmvly",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:21.223Z",
	"port": 5506,
	"requestId": "sim_1756955241220_5pkpsmvly",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:21.226Z",
	"port": 5506,
	"requestId": "sim_1756955241226_6gpyod8rr",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:21.238Z",
	"port": 5506,
	"requestId": "sim_1756955241226_6gpyod8rr",
	"processingTime": 12,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756955241229
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:21.242Z",
	"port": 5506,
	"requestId": "sim_1756955241242_d2eg1ab1l",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:21.246Z",
	"port": 5506,
	"requestId": "sim_1756955241242_d2eg1ab1l",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756955241246
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:07:21.249Z",
	"port": 5506,
	"requestId": "sim_1756955241249_n3zkacqgj",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:07:21.252Z",
	"port": 5506,
	"requestId": "sim_1756955241249_n3zkacqgj",
	"processingTime": 3,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756955241252
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.369Z",
	"port": 5506,
	"requestId": "sim_1756956278369_p8pyepejl",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.383Z",
	"port": 5506,
	"requestId": "sim_1756956278369_p8pyepejl",
	"output": {
		"id": "msg_sim_1756956278369_p8pyepejl",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 14,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.390Z",
	"port": 5506,
	"requestId": "sim_1756956278390_eex4ltod0",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.415Z",
	"port": 5506,
	"requestId": "sim_1756956278390_eex4ltod0",
	"processingTime": 25,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756956278395
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.427Z",
	"port": 5506,
	"requestId": "sim_1756956278427_afyrhs6ps",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.440Z",
	"port": 5506,
	"requestId": "sim_1756956278427_afyrhs6ps",
	"output": {
		"id": "msg_sim_1756956278427_afyrhs6ps",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.445Z",
	"port": 5506,
	"requestId": "sim_1756956278445_ywc70h925",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.450Z",
	"port": 5506,
	"requestId": "sim_1756956278445_ywc70h925",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756956278449
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.457Z",
	"port": 5506,
	"requestId": "sim_1756956278457_mj61vtxiz",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.469Z",
	"port": 5506,
	"requestId": "sim_1756956278457_mj61vtxiz",
	"output": {
		"id": "msg_sim_1756956278457_mj61vtxiz",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.473Z",
	"port": 5506,
	"requestId": "sim_1756956278473_es93p63in",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.486Z",
	"port": 5506,
	"requestId": "sim_1756956278473_es93p63in",
	"output": {
		"id": "msg_sim_1756956278473_es93p63in",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.491Z",
	"port": 5506,
	"requestId": "sim_1756956278491_kunq4ruif",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.496Z",
	"port": 5506,
	"requestId": "sim_1756956278491_kunq4ruif",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756956278495
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.500Z",
	"port": 5506,
	"requestId": "sim_1756956278500_w8h0av91r",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.504Z",
	"port": 5506,
	"requestId": "sim_1756956278500_w8h0av91r",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756956278504
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.508Z",
	"port": 5506,
	"requestId": "sim_1756956278508_zd7g12gqe",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.511Z",
	"port": 5506,
	"requestId": "sim_1756956278508_zd7g12gqe",
	"processingTime": 3,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756956278511
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.515Z",
	"port": 5506,
	"requestId": "sim_1756956278515_53uwksznt",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.519Z",
	"port": 5506,
	"requestId": "sim_1756956278515_53uwksznt",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756956278519
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:38.523Z",
	"port": 5506,
	"requestId": "sim_1756956278523_8s7qbm5g0",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:38.527Z",
	"port": 5506,
	"requestId": "sim_1756956278523_8s7qbm5g0",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756956278526
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:48.709Z",
	"port": 5506,
	"requestId": "sim_1756956288709_gurbf24pn",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:48.712Z",
	"port": 5506,
	"requestId": "sim_1756956288709_gurbf24pn",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:48.716Z",
	"port": 5506,
	"requestId": "sim_1756956288716_hcsfu18mk",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:48.733Z",
	"port": 5506,
	"requestId": "sim_1756956288716_hcsfu18mk",
	"processingTime": 17,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756956288725
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:48.738Z",
	"port": 5506,
	"requestId": "sim_1756956288738_j050gjin7",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:48.742Z",
	"port": 5506,
	"requestId": "sim_1756956288738_j050gjin7",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756956288742
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T03:24:48.746Z",
	"port": 5506,
	"requestId": "sim_1756956288746_pgv9ucq69",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T03:24:48.749Z",
	"port": 5506,
	"requestId": "sim_1756956288746_pgv9ucq69",
	"processingTime": 3,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756956288749
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.494Z",
	"port": 5506,
	"requestId": "sim_1756990277494_bn4hpobb2",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.508Z",
	"port": 5506,
	"requestId": "sim_1756990277494_bn4hpobb2",
	"output": {
		"id": "msg_sim_1756990277494_bn4hpobb2",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 14,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.513Z",
	"port": 5506,
	"requestId": "sim_1756990277513_152x14d08",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.535Z",
	"port": 5506,
	"requestId": "sim_1756990277513_152x14d08",
	"processingTime": 22,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756990277517
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.541Z",
	"port": 5506,
	"requestId": "sim_1756990277541_j3ac4aa56",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.552Z",
	"port": 5506,
	"requestId": "sim_1756990277541_j3ac4aa56",
	"output": {
		"id": "msg_sim_1756990277541_j3ac4aa56",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.557Z",
	"port": 5506,
	"requestId": "sim_1756990277557_kzbmcwmfo",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.561Z",
	"port": 5506,
	"requestId": "sim_1756990277557_kzbmcwmfo",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756990277560
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.566Z",
	"port": 5506,
	"requestId": "sim_1756990277566_agphonm6s",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.578Z",
	"port": 5506,
	"requestId": "sim_1756990277566_agphonm6s",
	"output": {
		"id": "msg_sim_1756990277566_agphonm6s",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.582Z",
	"port": 5506,
	"requestId": "sim_1756990277582_ko88auvpj",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.592Z",
	"port": 5506,
	"requestId": "sim_1756990277582_ko88auvpj",
	"output": {
		"id": "msg_sim_1756990277582_ko88auvpj",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 10,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.596Z",
	"port": 5506,
	"requestId": "sim_1756990277596_wnj4jnnlq",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.601Z",
	"port": 5506,
	"requestId": "sim_1756990277596_wnj4jnnlq",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756990277600
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.605Z",
	"port": 5506,
	"requestId": "sim_1756990277605_xsxz827zp",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.609Z",
	"port": 5506,
	"requestId": "sim_1756990277605_xsxz827zp",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756990277609
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.613Z",
	"port": 5506,
	"requestId": "sim_1756990277613_l9x4fpe1i",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.616Z",
	"port": 5506,
	"requestId": "sim_1756990277613_l9x4fpe1i",
	"processingTime": 3,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756990277616
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.620Z",
	"port": 5506,
	"requestId": "sim_1756990277620_8026frf1c",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.624Z",
	"port": 5506,
	"requestId": "sim_1756990277620_8026frf1c",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756990277623
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:17.627Z",
	"port": 5506,
	"requestId": "sim_1756990277627_nbi582ueq",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:17.631Z",
	"port": 5506,
	"requestId": "sim_1756990277627_nbi582ueq",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756990277631
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:27.863Z",
	"port": 5506,
	"requestId": "sim_1756990287863_gu4gek47e",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:27.866Z",
	"port": 5506,
	"requestId": "sim_1756990287863_gu4gek47e",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:27.869Z",
	"port": 5506,
	"requestId": "sim_1756990287869_x0rlw7q3q",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:27.882Z",
	"port": 5506,
	"requestId": "sim_1756990287869_x0rlw7q3q",
	"processingTime": 13,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756990287873
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:27.885Z",
	"port": 5506,
	"requestId": "sim_1756990287885_d11gdx9w3",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:27.889Z",
	"port": 5506,
	"requestId": "sim_1756990287885_d11gdx9w3",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756990287888
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T12:51:27.892Z",
	"port": 5506,
	"requestId": "sim_1756990287892_dtdovq1wp",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T12:51:27.895Z",
	"port": 5506,
	"requestId": "sim_1756990287892_dtdovq1wp",
	"processingTime": 3,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756990287895
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.631Z",
	"port": 5506,
	"requestId": "sim_1756991040631_lx56v8rar",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.646Z",
	"port": 5506,
	"requestId": "sim_1756991040631_lx56v8rar",
	"output": {
		"id": "msg_sim_1756991040631_lx56v8rar",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 15,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.5
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.5
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.651Z",
	"port": 5506,
	"requestId": "sim_1756991040651_u0y6tpo71",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.674Z",
	"port": 5506,
	"requestId": "sim_1756991040651_u0y6tpo71",
	"processingTime": 23,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756991040656
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.680Z",
	"port": 5506,
	"requestId": "sim_1756991040680_1jsm5e3h8",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.694Z",
	"port": 5506,
	"requestId": "sim_1756991040680_1jsm5e3h8",
	"output": {
		"id": "msg_sim_1756991040680_1jsm5e3h8",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 14,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.699Z",
	"port": 5506,
	"requestId": "sim_1756991040699_i89kt4ekr",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.706Z",
	"port": 5506,
	"requestId": "sim_1756991040699_i89kt4ekr",
	"processingTime": 7,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756991040705
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.712Z",
	"port": 5506,
	"requestId": "sim_1756991040712_aiclg94c3",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.726Z",
	"port": 5506,
	"requestId": "sim_1756991040712_aiclg94c3",
	"output": {
		"id": "msg_sim_1756991040712_aiclg94c3",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 14,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.731Z",
	"port": 5506,
	"requestId": "sim_1756991040731_snkiizb82",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.745Z",
	"port": 5506,
	"requestId": "sim_1756991040731_snkiizb82",
	"output": {
		"id": "msg_sim_1756991040731_snkiizb82",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 14,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.750Z",
	"port": 5506,
	"requestId": "sim_1756991040750_tmjov893i",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.755Z",
	"port": 5506,
	"requestId": "sim_1756991040750_tmjov893i",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756991040754
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.759Z",
	"port": 5506,
	"requestId": "sim_1756991040759_gc70sp256",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.764Z",
	"port": 5506,
	"requestId": "sim_1756991040759_gc70sp256",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756991040763
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.769Z",
	"port": 5506,
	"requestId": "sim_1756991040769_9h42qyf7o",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.773Z",
	"port": 5506,
	"requestId": "sim_1756991040769_9h42qyf7o",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756991040772
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.778Z",
	"port": 5506,
	"requestId": "sim_1756991040778_p02dswf99",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.783Z",
	"port": 5506,
	"requestId": "sim_1756991040778_p02dswf99",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756991040782
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:00.787Z",
	"port": 5506,
	"requestId": "sim_1756991040787_7ztghvd1h",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:00.793Z",
	"port": 5506,
	"requestId": "sim_1756991040787_7ztghvd1h",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756991040792
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:11.958Z",
	"port": 5506,
	"requestId": "sim_1756991051958_vc484z28y",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:11.962Z",
	"port": 5506,
	"requestId": "sim_1756991051958_vc484z28y",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:11.965Z",
	"port": 5506,
	"requestId": "sim_1756991051965_ucozo2ke4",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:11.976Z",
	"port": 5506,
	"requestId": "sim_1756991051965_ucozo2ke4",
	"processingTime": 11,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756991051969
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:11.980Z",
	"port": 5506,
	"requestId": "sim_1756991051980_84ylggks8",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:11.984Z",
	"port": 5506,
	"requestId": "sim_1756991051980_84ylggks8",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756991051984
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-04T13:04:11.989Z",
	"port": 5506,
	"requestId": "sim_1756991051989_0t9236etf",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-04T13:04:11.993Z",
	"port": 5506,
	"requestId": "sim_1756991051989_0t9236etf",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756991051993
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
