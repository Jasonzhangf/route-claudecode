{"timestamp":"2025-08-22T11:47:44.370Z","port":5506,"requestId":"sim_1755863264370_xf2fk1rvc","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello, how are you?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.417Z","port":5506,"requestId":"sim_1755863264370_xf2fk1rvc","processingTime":47,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:188:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264378}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.420Z","port":5506,"requestId":"sim_1755863264420_5d43lwmd7","input":{"model":"claude-3-opus-20240229","max_tokens":2000,"system":"You are a helpful assistant.","messages":[{"role":"user","content":"Explain quantum computing"}],"temperature":0.7},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.425Z","port":5506,"requestId":"sim_1755863264420_5d43lwmd7","processingTime":5,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:211:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264420}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.426Z","port":5506,"requestId":"sim_1755863264426_sxyuros0b","input":{"model":"claude-3-haiku-20240307","max_tokens":1000,"messages":[{"role":"user","content":"What is the capital of France?"},{"role":"assistant","content":"The capital of France is Paris."},{"role":"user","content":"What is its population?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.434Z","port":5506,"requestId":"sim_1755863264426_sxyuros0b","processingTime":8,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:238:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264427}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.435Z","port":5506,"requestId":"sim_1755863264435_t0ukm5v9j","input":{"model":"claude-3-sonnet-20240229","max_tokens":2000,"messages":[{"role":"user","content":"What is the weather like in New York?"}],"tools":[{"name":"get_weather","description":"Get current weather information","input_schema":{"type":"object","properties":{"location":{"type":"string"},"unit":{"type":"string","enum":["celsius","fahrenheit"]}},"required":["location"]}}],"tool_choice":{"type":"auto"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.442Z","port":5506,"requestId":"sim_1755863264435_t0ukm5v9j","processingTime":7,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:274:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264435}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.443Z","port":5506,"requestId":"sim_1755863264443_z8bk95mtu","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"stream":true,"messages":[{"role":"user","content":"Write a short story"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.448Z","port":5506,"requestId":"sim_1755863264443_z8bk95mtu","processingTime":5,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:294:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264443}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.449Z","port":5506,"requestId":"sim_1755863264449_mjo2ogmbd","input":{"model":"claude-3-opus-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"}],"metadata":{"user_id":"user_123","conversation_id":"conv_456"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.454Z","port":5506,"requestId":"sim_1755863264449_mjo2ogmbd","processingTime":5,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:316:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264449}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.455Z","port":5506,"requestId":"sim_1755863264455_vf9t459lv","input":{"max_tokens":1000,"messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.461Z","port":5506,"requestId":"sim_1755863264455_vf9t459lv","processingTime":6,"error":{"name":"InputValidationError","message":"字段 'model' 是必需的","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:337:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"model","expected":"valid value","actual":"invalid value","value":"see originalData","path":"model","message":"字段 'model' 是必需的","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264456}},"validation":{"inputValidation":{"success":false,"errors":["字段 'model' 是必需的"]},"outputValidation":{"success":false,"errors":["字段 'model' 是必需的"]}}}
{"timestamp":"2025-08-22T11:47:44.462Z","port":5506,"requestId":"sim_1755863264462_43i7cnnwi","input":{"model":"claude-3-sonnet-20240229","max_tokens":"invalid_number","messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.469Z","port":5506,"requestId":"sim_1755863264462_43i7cnnwi","processingTime":7,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 类型不匹配，期望: number, 实际: string","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:361:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"number","actual":"string","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 类型不匹配，期望: number, 实际: string","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264463}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 类型不匹配，期望: number, 实际: string"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 类型不匹配，期望: number, 实际: string"]}}}
{"timestamp":"2025-08-22T11:47:44.470Z","port":5506,"requestId":"sim_1755863264470_r3p570k4z","input":{"model":"claude-3-haiku-20240307","max_tokens":8192,"messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.476Z","port":5506,"requestId":"sim_1755863264470_r3p570k4z","processingTime":6,"error":{"name":"InputValidationError","message":"claude-3-haiku model only supports max_tokens up to 4096","code":"MODEL_TOKEN_LIMIT_EXCEEDED","stack":"InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:258:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:384:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"≤ 4096 for claude-3-haiku","actual":"8192","value":8192,"path":"max_tokens","message":"claude-3-haiku model only supports max_tokens up to 4096","code":"MODEL_TOKEN_LIMIT_EXCEEDED","timestamp":1755863264471}},"validation":{"inputValidation":{"success":false,"errors":["claude-3-haiku model only supports max_tokens up to 4096"]},"outputValidation":{"success":false,"errors":["claude-3-haiku model only supports max_tokens up to 4096"]}}}
{"timestamp":"2025-08-22T11:47:44.477Z","port":5506,"requestId":"sim_1755863264477_n0g6bjm63","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"}],"tools":[{"name":"get_weather","description":"Get weather","input_schema":{"type":"object","properties":{}}}],"tool_choice":{"type":"tool","name":"get_temperature"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.483Z","port":5506,"requestId":"sim_1755863264477_n0g6bjm63","processingTime":6,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:417:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264477}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.485Z","port":5506,"requestId":"sim_1755863264485_5zuaptgr8","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"},{"role":"user","content":"How are you?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.490Z","port":5506,"requestId":"sim_1755863264485_5zuaptgr8","processingTime":5,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:443:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264485}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.547Z","port":5506,"requestId":"sim_1755863264547_ct0kqzhjz","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test output validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.557Z","port":5506,"requestId":"sim_1755863264547_ct0kqzhjz","processingTime":10,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:578:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264547}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.558Z","port":5506,"requestId":"sim_1755863264558_15utdbpgl","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test invalid output"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.563Z","port":5506,"requestId":"sim_1755863264558_15utdbpgl","processingTime":5,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:616:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264558}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.563Z","port":5506,"requestId":"sim_1755863264563_jvmbd1nqc","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test business logic validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.568Z","port":5506,"requestId":"sim_1755863264563_jvmbd1nqc","processingTime":5,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:656:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264563}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-22T11:47:44.569Z","port":5506,"requestId":"sim_1755863264569_nqxi6d1lc","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test token validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-22T11:47:44.573Z","port":5506,"requestId":"sim_1755863264569_nqxi6d1lc","processingTime":4,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:695:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755863264569}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
