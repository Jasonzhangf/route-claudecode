{"timestamp":"2025-08-21T03:31:37.256Z","port":5506,"requestId":"sim_1755747097256_lmodwrxan","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello, how are you?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.278Z","port":5506,"requestId":"sim_1755747097256_lmodwrxan","processingTime":22,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:188:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097258}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.280Z","port":5506,"requestId":"sim_1755747097280_e2qjw9po4","input":{"model":"claude-3-opus-20240229","max_tokens":2000,"system":"You are a helpful assistant.","messages":[{"role":"user","content":"Explain quantum computing"}],"temperature":0.7},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.281Z","port":5506,"requestId":"sim_1755747097280_e2qjw9po4","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:211:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097281}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.282Z","port":5506,"requestId":"sim_1755747097282_u6zg2iafw","input":{"model":"claude-3-haiku-20240307","max_tokens":1000,"messages":[{"role":"user","content":"What is the capital of France?"},{"role":"assistant","content":"The capital of France is Paris."},{"role":"user","content":"What is its population?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.283Z","port":5506,"requestId":"sim_1755747097282_u6zg2iafw","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:238:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097282}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.283Z","port":5506,"requestId":"sim_1755747097283_efyyb57mk","input":{"model":"claude-3-sonnet-20240229","max_tokens":2000,"messages":[{"role":"user","content":"What is the weather like in New York?"}],"tools":[{"name":"get_weather","description":"Get current weather information","input_schema":{"type":"object","properties":{"location":{"type":"string"},"unit":{"type":"string","enum":["celsius","fahrenheit"]}},"required":["location"]}}],"tool_choice":{"type":"auto"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.284Z","port":5506,"requestId":"sim_1755747097283_efyyb57mk","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:274:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097283}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.284Z","port":5506,"requestId":"sim_1755747097284_f7sm4v1j5","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"stream":true,"messages":[{"role":"user","content":"Write a short story"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.285Z","port":5506,"requestId":"sim_1755747097284_f7sm4v1j5","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:294:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097284}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.285Z","port":5506,"requestId":"sim_1755747097285_82yrmurih","input":{"model":"claude-3-opus-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"}],"metadata":{"user_id":"user_123","conversation_id":"conv_456"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.286Z","port":5506,"requestId":"sim_1755747097285_82yrmurih","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:316:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097285}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.286Z","port":5506,"requestId":"sim_1755747097286_dyngmwi04","input":{"max_tokens":1000,"messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.287Z","port":5506,"requestId":"sim_1755747097286_dyngmwi04","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'model' 是必需的","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:337:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"model","expected":"valid value","actual":"invalid value","value":"see originalData","path":"model","message":"字段 'model' 是必需的","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097286}},"validation":{"inputValidation":{"success":false,"errors":["字段 'model' 是必需的"]},"outputValidation":{"success":false,"errors":["字段 'model' 是必需的"]}}}
{"timestamp":"2025-08-21T03:31:37.288Z","port":5506,"requestId":"sim_1755747097288_6g9k801we","input":{"model":"claude-3-sonnet-20240229","max_tokens":"invalid_number","messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.288Z","port":5506,"requestId":"sim_1755747097288_6g9k801we","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 类型不匹配，期望: number, 实际: string","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:361:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"number","actual":"string","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 类型不匹配，期望: number, 实际: string","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097288}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 类型不匹配，期望: number, 实际: string"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 类型不匹配，期望: number, 实际: string"]}}}
{"timestamp":"2025-08-21T03:31:37.289Z","port":5506,"requestId":"sim_1755747097289_nb0wm44qa","input":{"model":"claude-3-haiku-20240307","max_tokens":8192,"messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.289Z","port":5506,"requestId":"sim_1755747097289_nb0wm44qa","processingTime":0,"error":{"name":"InputValidationError","message":"claude-3-haiku model only supports max_tokens up to 4096","code":"MODEL_TOKEN_LIMIT_EXCEEDED","stack":"InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:258:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:384:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"≤ 4096 for claude-3-haiku","actual":"8192","value":8192,"path":"max_tokens","message":"claude-3-haiku model only supports max_tokens up to 4096","code":"MODEL_TOKEN_LIMIT_EXCEEDED","timestamp":1755747097289}},"validation":{"inputValidation":{"success":false,"errors":["claude-3-haiku model only supports max_tokens up to 4096"]},"outputValidation":{"success":false,"errors":["claude-3-haiku model only supports max_tokens up to 4096"]}}}
{"timestamp":"2025-08-21T03:31:37.290Z","port":5506,"requestId":"sim_1755747097290_wgmp5qcp1","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"}],"tools":[{"name":"get_weather","description":"Get weather","input_schema":{"type":"object","properties":{}}}],"tool_choice":{"type":"tool","name":"get_temperature"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.290Z","port":5506,"requestId":"sim_1755747097290_wgmp5qcp1","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:417:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097290}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.291Z","port":5506,"requestId":"sim_1755747097291_ivzn5gsxc","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"},{"role":"user","content":"How are you?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.292Z","port":5506,"requestId":"sim_1755747097291_ivzn5gsxc","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:443:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097292}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.306Z","port":5506,"requestId":"sim_1755747097306_5zkk099ve","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test output validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.307Z","port":5506,"requestId":"sim_1755747097306_5zkk099ve","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:578:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097306}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.307Z","port":5506,"requestId":"sim_1755747097307_dhhkpmacb","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test invalid output"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.308Z","port":5506,"requestId":"sim_1755747097307_dhhkpmacb","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:616:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097307}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.308Z","port":5506,"requestId":"sim_1755747097308_8dd2s15y6","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test business logic validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.309Z","port":5506,"requestId":"sim_1755747097308_8dd2s15y6","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:656:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097309}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:31:37.309Z","port":5506,"requestId":"sim_1755747097309_s9swlpxsy","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test token validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:31:37.310Z","port":5506,"requestId":"sim_1755747097309_s9swlpxsy","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:695:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747097309}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.366Z","port":5506,"requestId":"sim_1755747186366_imbdtrpdc","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello, how are you?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.392Z","port":5506,"requestId":"sim_1755747186366_imbdtrpdc","processingTime":26,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:188:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186367}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.394Z","port":5506,"requestId":"sim_1755747186394_kv78wddtc","input":{"model":"claude-3-opus-20240229","max_tokens":2000,"system":"You are a helpful assistant.","messages":[{"role":"user","content":"Explain quantum computing"}],"temperature":0.7},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.395Z","port":5506,"requestId":"sim_1755747186394_kv78wddtc","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:211:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186394}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.395Z","port":5506,"requestId":"sim_1755747186395_h3kc18cdh","input":{"model":"claude-3-haiku-20240307","max_tokens":1000,"messages":[{"role":"user","content":"What is the capital of France?"},{"role":"assistant","content":"The capital of France is Paris."},{"role":"user","content":"What is its population?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.396Z","port":5506,"requestId":"sim_1755747186395_h3kc18cdh","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:238:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186396}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.396Z","port":5506,"requestId":"sim_1755747186396_2okj7ad5c","input":{"model":"claude-3-sonnet-20240229","max_tokens":2000,"messages":[{"role":"user","content":"What is the weather like in New York?"}],"tools":[{"name":"get_weather","description":"Get current weather information","input_schema":{"type":"object","properties":{"location":{"type":"string"},"unit":{"type":"string","enum":["celsius","fahrenheit"]}},"required":["location"]}}],"tool_choice":{"type":"auto"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.397Z","port":5506,"requestId":"sim_1755747186396_2okj7ad5c","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:274:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186397}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.398Z","port":5506,"requestId":"sim_1755747186398_01u72g914","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"stream":true,"messages":[{"role":"user","content":"Write a short story"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.398Z","port":5506,"requestId":"sim_1755747186398_01u72g914","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:294:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186398}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.399Z","port":5506,"requestId":"sim_1755747186399_cyx5czg1j","input":{"model":"claude-3-opus-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"}],"metadata":{"user_id":"user_123","conversation_id":"conv_456"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.399Z","port":5506,"requestId":"sim_1755747186399_cyx5czg1j","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:316:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186399}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.400Z","port":5506,"requestId":"sim_1755747186400_x4cjfd41v","input":{"max_tokens":1000,"messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.400Z","port":5506,"requestId":"sim_1755747186400_x4cjfd41v","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'model' 是必需的","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:337:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"model","expected":"valid value","actual":"invalid value","value":"see originalData","path":"model","message":"字段 'model' 是必需的","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186400}},"validation":{"inputValidation":{"success":false,"errors":["字段 'model' 是必需的"]},"outputValidation":{"success":false,"errors":["字段 'model' 是必需的"]}}}
{"timestamp":"2025-08-21T03:33:06.401Z","port":5506,"requestId":"sim_1755747186401_u3l89qtn5","input":{"model":"claude-3-sonnet-20240229","max_tokens":"invalid_number","messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.401Z","port":5506,"requestId":"sim_1755747186401_u3l89qtn5","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 类型不匹配，期望: number, 实际: string","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:361:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"number","actual":"string","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 类型不匹配，期望: number, 实际: string","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186401}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 类型不匹配，期望: number, 实际: string"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 类型不匹配，期望: number, 实际: string"]}}}
{"timestamp":"2025-08-21T03:33:06.402Z","port":5506,"requestId":"sim_1755747186402_yqw5pxr18","input":{"model":"claude-3-haiku-20240307","max_tokens":8192,"messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.402Z","port":5506,"requestId":"sim_1755747186402_yqw5pxr18","processingTime":0,"error":{"name":"InputValidationError","message":"claude-3-haiku model only supports max_tokens up to 4096","code":"MODEL_TOKEN_LIMIT_EXCEEDED","stack":"InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:258:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:384:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"≤ 4096 for claude-3-haiku","actual":"8192","value":8192,"path":"max_tokens","message":"claude-3-haiku model only supports max_tokens up to 4096","code":"MODEL_TOKEN_LIMIT_EXCEEDED","timestamp":1755747186402}},"validation":{"inputValidation":{"success":false,"errors":["claude-3-haiku model only supports max_tokens up to 4096"]},"outputValidation":{"success":false,"errors":["claude-3-haiku model only supports max_tokens up to 4096"]}}}
{"timestamp":"2025-08-21T03:33:06.403Z","port":5506,"requestId":"sim_1755747186403_h84co322d","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"}],"tools":[{"name":"get_weather","description":"Get weather","input_schema":{"type":"object","properties":{}}}],"tool_choice":{"type":"tool","name":"get_temperature"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.403Z","port":5506,"requestId":"sim_1755747186403_h84co322d","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:417:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186403}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.405Z","port":5506,"requestId":"sim_1755747186405_h20hy44wi","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"},{"role":"user","content":"How are you?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.405Z","port":5506,"requestId":"sim_1755747186405_h20hy44wi","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:443:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186405}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.419Z","port":5506,"requestId":"sim_1755747186419_p3sm5uy3l","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test output validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.420Z","port":5506,"requestId":"sim_1755747186419_p3sm5uy3l","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:578:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186419}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.420Z","port":5506,"requestId":"sim_1755747186420_zlployoav","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test invalid output"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.420Z","port":5506,"requestId":"sim_1755747186420_zlployoav","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:616:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186420}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.421Z","port":5506,"requestId":"sim_1755747186421_9tjlh3xw1","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test business logic validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.421Z","port":5506,"requestId":"sim_1755747186421_9tjlh3xw1","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:656:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186421}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:33:06.421Z","port":5506,"requestId":"sim_1755747186421_myw1nly9h","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test token validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:33:06.422Z","port":5506,"requestId":"sim_1755747186421_myw1nly9h","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:695:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747186422}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.721Z","port":5506,"requestId":"sim_1755747452721_o84fvlnzx","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello, how are you?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.752Z","port":5506,"requestId":"sim_1755747452721_o84fvlnzx","processingTime":31,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:188:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452722}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.754Z","port":5506,"requestId":"sim_1755747452754_ej66ufgf5","input":{"model":"claude-3-opus-20240229","max_tokens":2000,"system":"You are a helpful assistant.","messages":[{"role":"user","content":"Explain quantum computing"}],"temperature":0.7},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.755Z","port":5506,"requestId":"sim_1755747452754_ej66ufgf5","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:211:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452754}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.755Z","port":5506,"requestId":"sim_1755747452755_73e89r25g","input":{"model":"claude-3-haiku-20240307","max_tokens":1000,"messages":[{"role":"user","content":"What is the capital of France?"},{"role":"assistant","content":"The capital of France is Paris."},{"role":"user","content":"What is its population?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.756Z","port":5506,"requestId":"sim_1755747452755_73e89r25g","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:238:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452756}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.757Z","port":5506,"requestId":"sim_1755747452757_9yuuls63p","input":{"model":"claude-3-sonnet-20240229","max_tokens":2000,"messages":[{"role":"user","content":"What is the weather like in New York?"}],"tools":[{"name":"get_weather","description":"Get current weather information","input_schema":{"type":"object","properties":{"location":{"type":"string"},"unit":{"type":"string","enum":["celsius","fahrenheit"]}},"required":["location"]}}],"tool_choice":{"type":"auto"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.758Z","port":5506,"requestId":"sim_1755747452757_9yuuls63p","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:274:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452757}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.758Z","port":5506,"requestId":"sim_1755747452758_cb53wgnt8","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"stream":true,"messages":[{"role":"user","content":"Write a short story"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.759Z","port":5506,"requestId":"sim_1755747452758_cb53wgnt8","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:294:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452759}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.760Z","port":5506,"requestId":"sim_1755747452760_pdes8zgci","input":{"model":"claude-3-opus-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"}],"metadata":{"user_id":"user_123","conversation_id":"conv_456"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.760Z","port":5506,"requestId":"sim_1755747452760_pdes8zgci","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:316:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452760}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.761Z","port":5506,"requestId":"sim_1755747452761_hmsrhvy81","input":{"max_tokens":1000,"messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.761Z","port":5506,"requestId":"sim_1755747452761_hmsrhvy81","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'model' 是必需的","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:337:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"model","expected":"valid value","actual":"invalid value","value":"see originalData","path":"model","message":"字段 'model' 是必需的","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452761}},"validation":{"inputValidation":{"success":false,"errors":["字段 'model' 是必需的"]},"outputValidation":{"success":false,"errors":["字段 'model' 是必需的"]}}}
{"timestamp":"2025-08-21T03:37:32.762Z","port":5506,"requestId":"sim_1755747452762_ahbuqrtdb","input":{"model":"claude-3-sonnet-20240229","max_tokens":"invalid_number","messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.762Z","port":5506,"requestId":"sim_1755747452762_ahbuqrtdb","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 类型不匹配，期望: number, 实际: string","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:361:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"number","actual":"string","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 类型不匹配，期望: number, 实际: string","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452762}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 类型不匹配，期望: number, 实际: string"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 类型不匹配，期望: number, 实际: string"]}}}
{"timestamp":"2025-08-21T03:37:32.763Z","port":5506,"requestId":"sim_1755747452763_u5koc11ls","input":{"model":"claude-3-haiku-20240307","max_tokens":8192,"messages":[{"role":"user","content":"Hello"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.763Z","port":5506,"requestId":"sim_1755747452763_u5koc11ls","processingTime":0,"error":{"name":"InputValidationError","message":"claude-3-haiku model only supports max_tokens up to 4096","code":"MODEL_TOKEN_LIMIT_EXCEEDED","stack":"InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:258:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:384:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"≤ 4096 for claude-3-haiku","actual":"8192","value":8192,"path":"max_tokens","message":"claude-3-haiku model only supports max_tokens up to 4096","code":"MODEL_TOKEN_LIMIT_EXCEEDED","timestamp":1755747452763}},"validation":{"inputValidation":{"success":false,"errors":["claude-3-haiku model only supports max_tokens up to 4096"]},"outputValidation":{"success":false,"errors":["claude-3-haiku model only supports max_tokens up to 4096"]}}}
{"timestamp":"2025-08-21T03:37:32.764Z","port":5506,"requestId":"sim_1755747452764_fuf6xst9l","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"}],"tools":[{"name":"get_weather","description":"Get weather","input_schema":{"type":"object","properties":{}}}],"tool_choice":{"type":"tool","name":"get_temperature"}},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.765Z","port":5506,"requestId":"sim_1755747452764_fuf6xst9l","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:417:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452764}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.766Z","port":5506,"requestId":"sim_1755747452766_ow21v8fib","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Hello"},{"role":"user","content":"How are you?"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.767Z","port":5506,"requestId":"sim_1755747452766_ow21v8fib","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:443:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452766}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.790Z","port":5506,"requestId":"sim_1755747452790_l1oohldp9","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test output validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.791Z","port":5506,"requestId":"sim_1755747452790_l1oohldp9","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:578:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452790}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.791Z","port":5506,"requestId":"sim_1755747452791_s8zufq15p","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test invalid output"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.791Z","port":5506,"requestId":"sim_1755747452791_s8zufq15p","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:616:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452791}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.792Z","port":5506,"requestId":"sim_1755747452792_sv0zin2yj","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test business logic validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.792Z","port":5506,"requestId":"sim_1755747452792_sv0zin2yj","processingTime":0,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:656:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452792}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
{"timestamp":"2025-08-21T03:37:32.792Z","port":5506,"requestId":"sim_1755747452792_edd86fw1u","input":{"model":"claude-3-sonnet-20240229","max_tokens":1000,"messages":[{"role":"user","content":"Test token validation"}]},"metadata":{"userAgent":"ClaudeCodeRequestSimulator/4.0.0","clientIP":"127.0.0.1","sessionId":"test_session","conversationId":"test_conversation"}}
{"timestamp":"2025-08-21T03:37:32.793Z","port":5506,"requestId":"sim_1755747452792_edd86fw1u","processingTime":1,"error":{"name":"InputValidationError","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","stack":"InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:178:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:66:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:695:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)","details":{"module":"client.input.validation","field":"max_tokens","expected":"one of: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","actual":"invalid enum value","value":"see originalData","path":"max_tokens","message":"字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000","code":"FIELD_VALIDATION_FAILED","timestamp":1755747452793}},"validation":{"inputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]},"outputValidation":{"success":false,"errors":["字段 'max_tokens' 的值必须是枚举值之一: 1, 4096, 8192, 16384, 32768, 65536, 100000, 200000"]}}}
