{
	"timestamp": "2025-09-01T23:38:01.197Z",
	"port": 5506,
	"requestId": "sim_1756769881197_nqw9olsc8",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.212Z",
	"port": 5506,
	"requestId": "sim_1756769881197_nqw9olsc8",
	"output": {
		"id": "msg_sim_1756769881197_nqw9olsc8",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 15,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.5
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.5
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:01.218Z",
	"port": 5506,
	"requestId": "sim_1756769881218_xgqd4h351",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.239Z",
	"port": 5506,
	"requestId": "sim_1756769881218_xgqd4h351",
	"processingTime": 21,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756769881223
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:01.246Z",
	"port": 5506,
	"requestId": "sim_1756769881246_pa8em2lz4",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.257Z",
	"port": 5506,
	"requestId": "sim_1756769881246_pa8em2lz4",
	"output": {
		"id": "msg_sim_1756769881246_pa8em2lz4",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:01.262Z",
	"port": 5506,
	"requestId": "sim_1756769881262_abwgjrgvs",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.268Z",
	"port": 5506,
	"requestId": "sim_1756769881262_abwgjrgvs",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756769881267
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:01.273Z",
	"port": 5506,
	"requestId": "sim_1756769881273_r7m9mvc93",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.286Z",
	"port": 5506,
	"requestId": "sim_1756769881273_r7m9mvc93",
	"output": {
		"id": "msg_sim_1756769881273_r7m9mvc93",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:01.290Z",
	"port": 5506,
	"requestId": "sim_1756769881290_ec31u8ozd",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.301Z",
	"port": 5506,
	"requestId": "sim_1756769881290_ec31u8ozd",
	"output": {
		"id": "msg_sim_1756769881290_ec31u8ozd",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:01.305Z",
	"port": 5506,
	"requestId": "sim_1756769881305_griujw6cw",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.310Z",
	"port": 5506,
	"requestId": "sim_1756769881305_griujw6cw",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756769881309
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:01.314Z",
	"port": 5506,
	"requestId": "sim_1756769881314_txz89wwcr",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.319Z",
	"port": 5506,
	"requestId": "sim_1756769881314_txz89wwcr",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756769881318
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:01.323Z",
	"port": 5506,
	"requestId": "sim_1756769881323_lquam0tqy",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.327Z",
	"port": 5506,
	"requestId": "sim_1756769881323_lquam0tqy",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756769881327
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:01.332Z",
	"port": 5506,
	"requestId": "sim_1756769881332_5oi1ufn14",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.336Z",
	"port": 5506,
	"requestId": "sim_1756769881332_5oi1ufn14",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756769881336
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:01.341Z",
	"port": 5506,
	"requestId": "sim_1756769881341_mwwc2k36j",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:01.345Z",
	"port": 5506,
	"requestId": "sim_1756769881341_mwwc2k36j",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756769881345
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:02.091Z",
	"port": 5506,
	"requestId": "sim_1756769882091_7iemk4bvc",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:02.095Z",
	"port": 5506,
	"requestId": "sim_1756769882091_7iemk4bvc",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:02.099Z",
	"port": 5506,
	"requestId": "sim_1756769882099_h0xvqngju",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:02.112Z",
	"port": 5506,
	"requestId": "sim_1756769882099_h0xvqngju",
	"processingTime": 13,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756769882104
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:02.117Z",
	"port": 5506,
	"requestId": "sim_1756769882117_t9xyh6uwf",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:02.122Z",
	"port": 5506,
	"requestId": "sim_1756769882117_t9xyh6uwf",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756769882122
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:02.127Z",
	"port": 5506,
	"requestId": "sim_1756769882127_x5fz3zov9",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:02.131Z",
	"port": 5506,
	"requestId": "sim_1756769882127_x5fz3zov9",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756769882131
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.536Z",
	"port": 5506,
	"requestId": "sim_1756769923536_ghvuo7iyg",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.551Z",
	"port": 5506,
	"requestId": "sim_1756769923536_ghvuo7iyg",
	"output": {
		"id": "msg_sim_1756769923536_ghvuo7iyg",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 15,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.5
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.5
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.557Z",
	"port": 5506,
	"requestId": "sim_1756769923557_6nv0lndpq",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.587Z",
	"port": 5506,
	"requestId": "sim_1756769923557_6nv0lndpq",
	"processingTime": 30,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756769923561
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.593Z",
	"port": 5506,
	"requestId": "sim_1756769923593_5wwgzu46v",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.605Z",
	"port": 5506,
	"requestId": "sim_1756769923593_5wwgzu46v",
	"output": {
		"id": "msg_sim_1756769923593_5wwgzu46v",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.609Z",
	"port": 5506,
	"requestId": "sim_1756769923609_jt20xhn1e",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.614Z",
	"port": 5506,
	"requestId": "sim_1756769923609_jt20xhn1e",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756769923613
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.618Z",
	"port": 5506,
	"requestId": "sim_1756769923618_es6bmlrye",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.627Z",
	"port": 5506,
	"requestId": "sim_1756769923618_es6bmlrye",
	"output": {
		"id": "msg_sim_1756769923618_es6bmlrye",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 9,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.9
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.9
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.631Z",
	"port": 5506,
	"requestId": "sim_1756769923631_awsifrgrw",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.643Z",
	"port": 5506,
	"requestId": "sim_1756769923631_awsifrgrw",
	"output": {
		"id": "msg_sim_1756769923631_awsifrgrw",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.647Z",
	"port": 5506,
	"requestId": "sim_1756769923647_yo070bpxz",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.652Z",
	"port": 5506,
	"requestId": "sim_1756769923647_yo070bpxz",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756769923651
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.656Z",
	"port": 5506,
	"requestId": "sim_1756769923656_7pqbmr0l2",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.660Z",
	"port": 5506,
	"requestId": "sim_1756769923656_7pqbmr0l2",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756769923659
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.664Z",
	"port": 5506,
	"requestId": "sim_1756769923664_t0sazttos",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.668Z",
	"port": 5506,
	"requestId": "sim_1756769923664_t0sazttos",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756769923668
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.673Z",
	"port": 5506,
	"requestId": "sim_1756769923673_xh0hubywc",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.677Z",
	"port": 5506,
	"requestId": "sim_1756769923673_xh0hubywc",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756769923677
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:43.681Z",
	"port": 5506,
	"requestId": "sim_1756769923681_fkaox8y0z",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:43.685Z",
	"port": 5506,
	"requestId": "sim_1756769923681_fkaox8y0z",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756769923685
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:44.955Z",
	"port": 5506,
	"requestId": "sim_1756769924955_ay1rtfjth",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:44.958Z",
	"port": 5506,
	"requestId": "sim_1756769924955_ay1rtfjth",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:44.962Z",
	"port": 5506,
	"requestId": "sim_1756769924962_khwglrkyg",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:44.973Z",
	"port": 5506,
	"requestId": "sim_1756769924962_khwglrkyg",
	"processingTime": 11,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756769924965
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:44.977Z",
	"port": 5506,
	"requestId": "sim_1756769924977_lw84nxjoo",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:44.982Z",
	"port": 5506,
	"requestId": "sim_1756769924977_lw84nxjoo",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756769924981
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:38:44.986Z",
	"port": 5506,
	"requestId": "sim_1756769924986_gt12u6270",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:38:44.990Z",
	"port": 5506,
	"requestId": "sim_1756769924986_gt12u6270",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756769924989
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.479Z",
	"port": 5506,
	"requestId": "sim_1756770089479_b5zjq6q5s",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.496Z",
	"port": 5506,
	"requestId": "sim_1756770089479_b5zjq6q5s",
	"output": {
		"id": "msg_sim_1756770089479_b5zjq6q5s",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 17,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.501Z",
	"port": 5506,
	"requestId": "sim_1756770089501_pcdqfd97z",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.531Z",
	"port": 5506,
	"requestId": "sim_1756770089501_pcdqfd97z",
	"processingTime": 30,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770089505
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.537Z",
	"port": 5506,
	"requestId": "sim_1756770089537_ninxhscp0",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.549Z",
	"port": 5506,
	"requestId": "sim_1756770089537_ninxhscp0",
	"output": {
		"id": "msg_sim_1756770089537_ninxhscp0",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.554Z",
	"port": 5506,
	"requestId": "sim_1756770089554_amlwqfej8",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.560Z",
	"port": 5506,
	"requestId": "sim_1756770089554_amlwqfej8",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770089559
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.565Z",
	"port": 5506,
	"requestId": "sim_1756770089565_56j3mhekn",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.578Z",
	"port": 5506,
	"requestId": "sim_1756770089565_56j3mhekn",
	"output": {
		"id": "msg_sim_1756770089565_56j3mhekn",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.583Z",
	"port": 5506,
	"requestId": "sim_1756770089582_fiqa3o1wn",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.594Z",
	"port": 5506,
	"requestId": "sim_1756770089582_fiqa3o1wn",
	"output": {
		"id": "msg_sim_1756770089582_fiqa3o1wn",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.598Z",
	"port": 5506,
	"requestId": "sim_1756770089598_5aain4c2u",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.602Z",
	"port": 5506,
	"requestId": "sim_1756770089598_5aain4c2u",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770089601
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.606Z",
	"port": 5506,
	"requestId": "sim_1756770089606_xgzrvem1y",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.611Z",
	"port": 5506,
	"requestId": "sim_1756770089606_xgzrvem1y",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770089611
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.616Z",
	"port": 5506,
	"requestId": "sim_1756770089616_qk7jk85zh",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.621Z",
	"port": 5506,
	"requestId": "sim_1756770089616_qk7jk85zh",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756770089620
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.625Z",
	"port": 5506,
	"requestId": "sim_1756770089625_7aqgnbvyz",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.629Z",
	"port": 5506,
	"requestId": "sim_1756770089625_7aqgnbvyz",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756770089629
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:29.633Z",
	"port": 5506,
	"requestId": "sim_1756770089633_3yp0gwo41",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:29.637Z",
	"port": 5506,
	"requestId": "sim_1756770089633_3yp0gwo41",
	"processingTime": 3,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756770089636
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:31.506Z",
	"port": 5506,
	"requestId": "sim_1756770091506_ybxi7gcf2",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:31.509Z",
	"port": 5506,
	"requestId": "sim_1756770091506_ybxi7gcf2",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:31.513Z",
	"port": 5506,
	"requestId": "sim_1756770091513_13m8381re",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:31.525Z",
	"port": 5506,
	"requestId": "sim_1756770091513_13m8381re",
	"processingTime": 12,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756770091517
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:31.530Z",
	"port": 5506,
	"requestId": "sim_1756770091530_194cp9qht",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:31.534Z",
	"port": 5506,
	"requestId": "sim_1756770091530_194cp9qht",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756770091533
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:31.537Z",
	"port": 5506,
	"requestId": "sim_1756770091537_yl5s6tt78",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:31.542Z",
	"port": 5506,
	"requestId": "sim_1756770091537_yl5s6tt78",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756770091541
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.343Z",
	"port": 5506,
	"requestId": "sim_1756770096343_fqdnd6fx7",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.360Z",
	"port": 5506,
	"requestId": "sim_1756770096343_fqdnd6fx7",
	"output": {
		"id": "msg_sim_1756770096343_fqdnd6fx7",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 17,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.365Z",
	"port": 5506,
	"requestId": "sim_1756770096365_wn07pbw1f",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.388Z",
	"port": 5506,
	"requestId": "sim_1756770096365_wn07pbw1f",
	"processingTime": 23,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770096370
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.394Z",
	"port": 5506,
	"requestId": "sim_1756770096394_17x4s240k",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.407Z",
	"port": 5506,
	"requestId": "sim_1756770096394_17x4s240k",
	"output": {
		"id": "msg_sim_1756770096394_17x4s240k",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.412Z",
	"port": 5506,
	"requestId": "sim_1756770096412_cjpy0asye",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.426Z",
	"port": 5506,
	"requestId": "sim_1756770096412_cjpy0asye",
	"processingTime": 14,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770096416
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.431Z",
	"port": 5506,
	"requestId": "sim_1756770096431_0geooqfv8",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.444Z",
	"port": 5506,
	"requestId": "sim_1756770096431_0geooqfv8",
	"output": {
		"id": "msg_sim_1756770096431_0geooqfv8",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.448Z",
	"port": 5506,
	"requestId": "sim_1756770096448_i8oxdl45j",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.458Z",
	"port": 5506,
	"requestId": "sim_1756770096448_i8oxdl45j",
	"output": {
		"id": "msg_sim_1756770096448_i8oxdl45j",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 10,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.463Z",
	"port": 5506,
	"requestId": "sim_1756770096463_ui0j9q4mp",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.468Z",
	"port": 5506,
	"requestId": "sim_1756770096463_ui0j9q4mp",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770096467
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.473Z",
	"port": 5506,
	"requestId": "sim_1756770096473_zr7phyiw1",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.477Z",
	"port": 5506,
	"requestId": "sim_1756770096473_zr7phyiw1",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770096477
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.482Z",
	"port": 5506,
	"requestId": "sim_1756770096482_em3a1o97m",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.485Z",
	"port": 5506,
	"requestId": "sim_1756770096482_em3a1o97m",
	"processingTime": 3,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756770096485
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.490Z",
	"port": 5506,
	"requestId": "sim_1756770096490_mo8dg1wi1",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.495Z",
	"port": 5506,
	"requestId": "sim_1756770096490_mo8dg1wi1",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756770096494
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:36.499Z",
	"port": 5506,
	"requestId": "sim_1756770096499_5mcu8mpp9",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:36.504Z",
	"port": 5506,
	"requestId": "sim_1756770096499_5mcu8mpp9",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756770096503
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:38.981Z",
	"port": 5506,
	"requestId": "sim_1756770098981_pjfe43vey",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:38.985Z",
	"port": 5506,
	"requestId": "sim_1756770098981_pjfe43vey",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:38.989Z",
	"port": 5506,
	"requestId": "sim_1756770098989_fhexl9rfx",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:39.000Z",
	"port": 5506,
	"requestId": "sim_1756770098989_fhexl9rfx",
	"processingTime": 11,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756770098993
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:39.004Z",
	"port": 5506,
	"requestId": "sim_1756770099004_pheochzu8",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:39.009Z",
	"port": 5506,
	"requestId": "sim_1756770099004_pheochzu8",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756770099009
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:41:39.013Z",
	"port": 5506,
	"requestId": "sim_1756770099013_1pmgstv7o",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:41:39.017Z",
	"port": 5506,
	"requestId": "sim_1756770099013_1pmgstv7o",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756770099017
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.164Z",
	"port": 5506,
	"requestId": "sim_1756770160164_823mu6dsb",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.179Z",
	"port": 5506,
	"requestId": "sim_1756770160164_823mu6dsb",
	"output": {
		"id": "msg_sim_1756770160164_823mu6dsb",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 15,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.5
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.5
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.184Z",
	"port": 5506,
	"requestId": "sim_1756770160184_x3mmce5q1",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.209Z",
	"port": 5506,
	"requestId": "sim_1756770160184_x3mmce5q1",
	"processingTime": 25,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770160189
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.214Z",
	"port": 5506,
	"requestId": "sim_1756770160214_knstrgwo4",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.227Z",
	"port": 5506,
	"requestId": "sim_1756770160214_knstrgwo4",
	"output": {
		"id": "msg_sim_1756770160214_knstrgwo4",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.233Z",
	"port": 5506,
	"requestId": "sim_1756770160232_cc2ktjdxq",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.238Z",
	"port": 5506,
	"requestId": "sim_1756770160232_cc2ktjdxq",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770160237
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.244Z",
	"port": 5506,
	"requestId": "sim_1756770160244_f09qtaudk",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.256Z",
	"port": 5506,
	"requestId": "sim_1756770160244_f09qtaudk",
	"output": {
		"id": "msg_sim_1756770160244_f09qtaudk",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.260Z",
	"port": 5506,
	"requestId": "sim_1756770160260_k8radyehg",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.273Z",
	"port": 5506,
	"requestId": "sim_1756770160260_k8radyehg",
	"output": {
		"id": "msg_sim_1756770160260_k8radyehg",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.278Z",
	"port": 5506,
	"requestId": "sim_1756770160278_vsdldhwha",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.282Z",
	"port": 5506,
	"requestId": "sim_1756770160278_vsdldhwha",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770160282
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.288Z",
	"port": 5506,
	"requestId": "sim_1756770160288_bdjmqok7w",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.292Z",
	"port": 5506,
	"requestId": "sim_1756770160288_bdjmqok7w",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770160292
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.297Z",
	"port": 5506,
	"requestId": "sim_1756770160297_3o9mttuar",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.302Z",
	"port": 5506,
	"requestId": "sim_1756770160297_3o9mttuar",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756770160302
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.307Z",
	"port": 5506,
	"requestId": "sim_1756770160307_j0cqzkvyi",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.311Z",
	"port": 5506,
	"requestId": "sim_1756770160307_j0cqzkvyi",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756770160311
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:40.316Z",
	"port": 5506,
	"requestId": "sim_1756770160316_0haanhjux",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:40.321Z",
	"port": 5506,
	"requestId": "sim_1756770160316_0haanhjux",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756770160320
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:43.252Z",
	"port": 5506,
	"requestId": "sim_1756770163252_2h2wam0g5",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:43.256Z",
	"port": 5506,
	"requestId": "sim_1756770163252_2h2wam0g5",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:43.259Z",
	"port": 5506,
	"requestId": "sim_1756770163259_vcy6eckrr",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:43.272Z",
	"port": 5506,
	"requestId": "sim_1756770163259_vcy6eckrr",
	"processingTime": 13,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756770163263
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:43.276Z",
	"port": 5506,
	"requestId": "sim_1756770163276_8rutqavcq",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:43.280Z",
	"port": 5506,
	"requestId": "sim_1756770163276_8rutqavcq",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756770163279
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:42:43.283Z",
	"port": 5506,
	"requestId": "sim_1756770163283_kf5k6hsxt",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:42:43.287Z",
	"port": 5506,
	"requestId": "sim_1756770163283_kf5k6hsxt",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756770163287
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.104Z",
	"port": 5506,
	"requestId": "sim_1756770518104_dzo9momsj",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.121Z",
	"port": 5506,
	"requestId": "sim_1756770518104_dzo9momsj",
	"output": {
		"id": "msg_sim_1756770518104_dzo9momsj",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 17,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.127Z",
	"port": 5506,
	"requestId": "sim_1756770518127_oht4k8ngj",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.156Z",
	"port": 5506,
	"requestId": "sim_1756770518127_oht4k8ngj",
	"processingTime": 29,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770518132
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.163Z",
	"port": 5506,
	"requestId": "sim_1756770518163_tssibmw8r",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.176Z",
	"port": 5506,
	"requestId": "sim_1756770518163_tssibmw8r",
	"output": {
		"id": "msg_sim_1756770518163_tssibmw8r",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.180Z",
	"port": 5506,
	"requestId": "sim_1756770518180_bbnqnpfcm",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.185Z",
	"port": 5506,
	"requestId": "sim_1756770518180_bbnqnpfcm",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770518184
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.190Z",
	"port": 5506,
	"requestId": "sim_1756770518190_vd1iaiyl8",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.203Z",
	"port": 5506,
	"requestId": "sim_1756770518190_vd1iaiyl8",
	"output": {
		"id": "msg_sim_1756770518190_vd1iaiyl8",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.208Z",
	"port": 5506,
	"requestId": "sim_1756770518208_84f2eow95",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.219Z",
	"port": 5506,
	"requestId": "sim_1756770518208_84f2eow95",
	"output": {
		"id": "msg_sim_1756770518208_84f2eow95",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.222Z",
	"port": 5506,
	"requestId": "sim_1756770518222_zo1g50r0m",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.226Z",
	"port": 5506,
	"requestId": "sim_1756770518222_zo1g50r0m",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770518226
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.231Z",
	"port": 5506,
	"requestId": "sim_1756770518231_pdluyxbng",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.236Z",
	"port": 5506,
	"requestId": "sim_1756770518231_pdluyxbng",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770518235
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.241Z",
	"port": 5506,
	"requestId": "sim_1756770518241_55k87l89d",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.245Z",
	"port": 5506,
	"requestId": "sim_1756770518241_55k87l89d",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756770518244
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.249Z",
	"port": 5506,
	"requestId": "sim_1756770518249_zjnyjiwdt",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.253Z",
	"port": 5506,
	"requestId": "sim_1756770518249_zjnyjiwdt",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756770518253
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:38.257Z",
	"port": 5506,
	"requestId": "sim_1756770518257_6sj48i6bz",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:38.261Z",
	"port": 5506,
	"requestId": "sim_1756770518257_6sj48i6bz",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756770518261
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:41.829Z",
	"port": 5506,
	"requestId": "sim_1756770521829_1gkwgqllv",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:41.832Z",
	"port": 5506,
	"requestId": "sim_1756770521829_1gkwgqllv",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:41.836Z",
	"port": 5506,
	"requestId": "sim_1756770521836_fampb2e67",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:41.847Z",
	"port": 5506,
	"requestId": "sim_1756770521836_fampb2e67",
	"processingTime": 11,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756770521839
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:41.851Z",
	"port": 5506,
	"requestId": "sim_1756770521851_3lums7k4t",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:41.854Z",
	"port": 5506,
	"requestId": "sim_1756770521851_3lums7k4t",
	"processingTime": 3,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756770521854
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:48:41.859Z",
	"port": 5506,
	"requestId": "sim_1756770521859_khshatxhz",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:48:41.864Z",
	"port": 5506,
	"requestId": "sim_1756770521859_khshatxhz",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756770521863
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.328Z",
	"port": 5506,
	"requestId": "sim_1756770632328_qkbxwdxbh",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.346Z",
	"port": 5506,
	"requestId": "sim_1756770632328_qkbxwdxbh",
	"output": {
		"id": "msg_sim_1756770632328_qkbxwdxbh",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 18,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.8
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.8
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.352Z",
	"port": 5506,
	"requestId": "sim_1756770632352_w0r81dk8p",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.373Z",
	"port": 5506,
	"requestId": "sim_1756770632352_w0r81dk8p",
	"processingTime": 21,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770632356
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.378Z",
	"port": 5506,
	"requestId": "sim_1756770632378_o20z0ach1",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.392Z",
	"port": 5506,
	"requestId": "sim_1756770632378_o20z0ach1",
	"output": {
		"id": "msg_sim_1756770632378_o20z0ach1",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 14,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.396Z",
	"port": 5506,
	"requestId": "sim_1756770632396_3gpffv1pd",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.401Z",
	"port": 5506,
	"requestId": "sim_1756770632396_3gpffv1pd",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770632400
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.405Z",
	"port": 5506,
	"requestId": "sim_1756770632405_jje3x7yao",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.416Z",
	"port": 5506,
	"requestId": "sim_1756770632405_jje3x7yao",
	"output": {
		"id": "msg_sim_1756770632405_jje3x7yao",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.421Z",
	"port": 5506,
	"requestId": "sim_1756770632421_nx95esaly",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.433Z",
	"port": 5506,
	"requestId": "sim_1756770632421_nx95esaly",
	"output": {
		"id": "msg_sim_1756770632421_nx95esaly",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.438Z",
	"port": 5506,
	"requestId": "sim_1756770632438_m8j6idqgd",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.443Z",
	"port": 5506,
	"requestId": "sim_1756770632438_m8j6idqgd",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770632442
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.449Z",
	"port": 5506,
	"requestId": "sim_1756770632449_nqlcppuua",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.454Z",
	"port": 5506,
	"requestId": "sim_1756770632449_nqlcppuua",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770632453
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.458Z",
	"port": 5506,
	"requestId": "sim_1756770632458_f1ns1rlj6",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.462Z",
	"port": 5506,
	"requestId": "sim_1756770632458_f1ns1rlj6",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756770632462
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.466Z",
	"port": 5506,
	"requestId": "sim_1756770632466_nwbfjqwi6",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.470Z",
	"port": 5506,
	"requestId": "sim_1756770632466_nwbfjqwi6",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756770632470
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:32.474Z",
	"port": 5506,
	"requestId": "sim_1756770632474_glvd0pg6u",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:32.478Z",
	"port": 5506,
	"requestId": "sim_1756770632474_glvd0pg6u",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756770632478
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:36.592Z",
	"port": 5506,
	"requestId": "sim_1756770636592_kupxojw36",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:36.595Z",
	"port": 5506,
	"requestId": "sim_1756770636592_kupxojw36",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:36.599Z",
	"port": 5506,
	"requestId": "sim_1756770636599_ilj1l0qya",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:36.611Z",
	"port": 5506,
	"requestId": "sim_1756770636599_ilj1l0qya",
	"processingTime": 12,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756770636603
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:36.615Z",
	"port": 5506,
	"requestId": "sim_1756770636615_8jfsaxr0x",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:36.618Z",
	"port": 5506,
	"requestId": "sim_1756770636615_8jfsaxr0x",
	"processingTime": 3,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756770636618
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:50:36.622Z",
	"port": 5506,
	"requestId": "sim_1756770636622_5ektigl7k",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:50:36.625Z",
	"port": 5506,
	"requestId": "sim_1756770636622_5ektigl7k",
	"processingTime": 3,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756770636625
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.447Z",
	"port": 5506,
	"requestId": "sim_1756770859447_pxb7k2hkk",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.463Z",
	"port": 5506,
	"requestId": "sim_1756770859447_pxb7k2hkk",
	"output": {
		"id": "msg_sim_1756770859447_pxb7k2hkk",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 16,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.6
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.6
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.468Z",
	"port": 5506,
	"requestId": "sim_1756770859468_w0fuj86nm",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.496Z",
	"port": 5506,
	"requestId": "sim_1756770859468_w0fuj86nm",
	"processingTime": 28,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770859472
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.502Z",
	"port": 5506,
	"requestId": "sim_1756770859502_v16k16tze",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.512Z",
	"port": 5506,
	"requestId": "sim_1756770859502_v16k16tze",
	"output": {
		"id": "msg_sim_1756770859502_v16k16tze",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 10,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.517Z",
	"port": 5506,
	"requestId": "sim_1756770859517_1yc1siopp",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.522Z",
	"port": 5506,
	"requestId": "sim_1756770859517_1yc1siopp",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770859521
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.526Z",
	"port": 5506,
	"requestId": "sim_1756770859526_2oek6nufk",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.536Z",
	"port": 5506,
	"requestId": "sim_1756770859526_2oek6nufk",
	"output": {
		"id": "msg_sim_1756770859526_2oek6nufk",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 10,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.540Z",
	"port": 5506,
	"requestId": "sim_1756770859540_l92iomcgx",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.551Z",
	"port": 5506,
	"requestId": "sim_1756770859540_l92iomcgx",
	"output": {
		"id": "msg_sim_1756770859540_l92iomcgx",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.555Z",
	"port": 5506,
	"requestId": "sim_1756770859555_gqauzool3",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.560Z",
	"port": 5506,
	"requestId": "sim_1756770859555_gqauzool3",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770859559
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.565Z",
	"port": 5506,
	"requestId": "sim_1756770859565_sa7uiwz0l",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.569Z",
	"port": 5506,
	"requestId": "sim_1756770859565_sa7uiwz0l",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770859568
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.573Z",
	"port": 5506,
	"requestId": "sim_1756770859573_47fisv0m7",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.577Z",
	"port": 5506,
	"requestId": "sim_1756770859573_47fisv0m7",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756770859576
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.581Z",
	"port": 5506,
	"requestId": "sim_1756770859581_9ug7bgp0w",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.584Z",
	"port": 5506,
	"requestId": "sim_1756770859581_9ug7bgp0w",
	"processingTime": 3,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756770859584
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:19.588Z",
	"port": 5506,
	"requestId": "sim_1756770859588_we58i8ano",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:19.592Z",
	"port": 5506,
	"requestId": "sim_1756770859588_we58i8ano",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756770859592
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:24.421Z",
	"port": 5506,
	"requestId": "sim_1756770864421_1dg6wv704",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:24.424Z",
	"port": 5506,
	"requestId": "sim_1756770864421_1dg6wv704",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:24.428Z",
	"port": 5506,
	"requestId": "sim_1756770864428_mkxxw2xt6",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:24.439Z",
	"port": 5506,
	"requestId": "sim_1756770864428_mkxxw2xt6",
	"processingTime": 11,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756770864431
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:24.444Z",
	"port": 5506,
	"requestId": "sim_1756770864444_eytrxoy07",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:24.448Z",
	"port": 5506,
	"requestId": "sim_1756770864444_eytrxoy07",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756770864448
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:54:24.453Z",
	"port": 5506,
	"requestId": "sim_1756770864453_76i82iqlj",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:54:24.457Z",
	"port": 5506,
	"requestId": "sim_1756770864453_76i82iqlj",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756770864456
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.701Z",
	"port": 5506,
	"requestId": "sim_1756770978701_ha2c5xblr",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.722Z",
	"port": 5506,
	"requestId": "sim_1756770978701_ha2c5xblr",
	"output": {
		"id": "msg_sim_1756770978701_ha2c5xblr",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 21,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 2.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 2.1
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.730Z",
	"port": 5506,
	"requestId": "sim_1756770978730_6roq9d3ta",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.752Z",
	"port": 5506,
	"requestId": "sim_1756770978730_6roq9d3ta",
	"processingTime": 22,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770978735
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.759Z",
	"port": 5506,
	"requestId": "sim_1756770978759_6s29wvbts",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.772Z",
	"port": 5506,
	"requestId": "sim_1756770978759_6s29wvbts",
	"output": {
		"id": "msg_sim_1756770978759_6s29wvbts",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.777Z",
	"port": 5506,
	"requestId": "sim_1756770978777_3kk311gkl",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.783Z",
	"port": 5506,
	"requestId": "sim_1756770978777_3kk311gkl",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770978782
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.788Z",
	"port": 5506,
	"requestId": "sim_1756770978788_jg05hufkk",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.800Z",
	"port": 5506,
	"requestId": "sim_1756770978788_jg05hufkk",
	"output": {
		"id": "msg_sim_1756770978788_jg05hufkk",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.806Z",
	"port": 5506,
	"requestId": "sim_1756770978806_d549spmfi",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.818Z",
	"port": 5506,
	"requestId": "sim_1756770978806_d549spmfi",
	"output": {
		"id": "msg_sim_1756770978806_d549spmfi",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.822Z",
	"port": 5506,
	"requestId": "sim_1756770978822_4th0ymwsj",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.827Z",
	"port": 5506,
	"requestId": "sim_1756770978822_4th0ymwsj",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770978826
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.831Z",
	"port": 5506,
	"requestId": "sim_1756770978831_6dhmo1p8q",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.836Z",
	"port": 5506,
	"requestId": "sim_1756770978831_6dhmo1p8q",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756770978836
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.842Z",
	"port": 5506,
	"requestId": "sim_1756770978842_p3f4khtx8",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.847Z",
	"port": 5506,
	"requestId": "sim_1756770978842_p3f4khtx8",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756770978847
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.852Z",
	"port": 5506,
	"requestId": "sim_1756770978852_ovdu7iplx",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.856Z",
	"port": 5506,
	"requestId": "sim_1756770978852_ovdu7iplx",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756770978855
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:18.860Z",
	"port": 5506,
	"requestId": "sim_1756770978860_ucpprulgw",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:18.864Z",
	"port": 5506,
	"requestId": "sim_1756770978860_ucpprulgw",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756770978864
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:24.309Z",
	"port": 5506,
	"requestId": "sim_1756770984309_ueubw46s1",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:24.312Z",
	"port": 5506,
	"requestId": "sim_1756770984309_ueubw46s1",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:24.317Z",
	"port": 5506,
	"requestId": "sim_1756770984317_3vqrmc47m",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:24.329Z",
	"port": 5506,
	"requestId": "sim_1756770984317_3vqrmc47m",
	"processingTime": 12,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756770984321
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:24.333Z",
	"port": 5506,
	"requestId": "sim_1756770984333_q312g5e60",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:24.337Z",
	"port": 5506,
	"requestId": "sim_1756770984333_q312g5e60",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756770984337
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-01T23:56:24.342Z",
	"port": 5506,
	"requestId": "sim_1756770984342_a0a170o9d",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-01T23:56:24.346Z",
	"port": 5506,
	"requestId": "sim_1756770984342_a0a170o9d",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756770984346
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
