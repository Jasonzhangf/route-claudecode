{
	"timestamp": "2025-09-02T00:04:03.866Z",
	"port": 5506,
	"requestId": "sim_1756771443866_2fjvoeqhy",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:03.889Z",
	"port": 5506,
	"requestId": "sim_1756771443866_2fjvoeqhy",
	"output": {
		"id": "msg_sim_1756771443866_2fjvoeqhy",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 23,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 2.3000000000000003
		},
		"outputValidation": {
			"success": true,
			"processingTime": 2.3000000000000003
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:03.896Z",
	"port": 5506,
	"requestId": "sim_1756771443896_sz1zp50zr",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:03.922Z",
	"port": 5506,
	"requestId": "sim_1756771443896_sz1zp50zr",
	"processingTime": 26,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756771443903
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:03.942Z",
	"port": 5506,
	"requestId": "sim_1756771443942_dyi6p37ba",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:03.955Z",
	"port": 5506,
	"requestId": "sim_1756771443942_dyi6p37ba",
	"output": {
		"id": "msg_sim_1756771443942_dyi6p37ba",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:03.960Z",
	"port": 5506,
	"requestId": "sim_1756771443960_13rvnbwcz",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:03.966Z",
	"port": 5506,
	"requestId": "sim_1756771443960_13rvnbwcz",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756771443965
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:03.971Z",
	"port": 5506,
	"requestId": "sim_1756771443971_oxx6ixly4",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:03.988Z",
	"port": 5506,
	"requestId": "sim_1756771443971_oxx6ixly4",
	"output": {
		"id": "msg_sim_1756771443971_oxx6ixly4",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 17,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:03.993Z",
	"port": 5506,
	"requestId": "sim_1756771443993_uezaqaroi",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:04.005Z",
	"port": 5506,
	"requestId": "sim_1756771443993_uezaqaroi",
	"output": {
		"id": "msg_sim_1756771443993_uezaqaroi",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:04.010Z",
	"port": 5506,
	"requestId": "sim_1756771444010_hgdvh1sht",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:04.014Z",
	"port": 5506,
	"requestId": "sim_1756771444010_hgdvh1sht",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756771444013
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:04.019Z",
	"port": 5506,
	"requestId": "sim_1756771444019_mhda02r4u",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:04.023Z",
	"port": 5506,
	"requestId": "sim_1756771444019_mhda02r4u",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756771444023
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:04.029Z",
	"port": 5506,
	"requestId": "sim_1756771444029_ac0lgt1zf",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:04.033Z",
	"port": 5506,
	"requestId": "sim_1756771444029_ac0lgt1zf",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756771444033
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:04.038Z",
	"port": 5506,
	"requestId": "sim_1756771444038_0779hrg6k",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:04.042Z",
	"port": 5506,
	"requestId": "sim_1756771444038_0779hrg6k",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756771444042
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:04.047Z",
	"port": 5506,
	"requestId": "sim_1756771444047_6o2z38mkf",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:04.052Z",
	"port": 5506,
	"requestId": "sim_1756771444047_6o2z38mkf",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756771444052
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:10.269Z",
	"port": 5506,
	"requestId": "sim_1756771450269_4wz0fqqyv",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:10.272Z",
	"port": 5506,
	"requestId": "sim_1756771450269_4wz0fqqyv",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:10.276Z",
	"port": 5506,
	"requestId": "sim_1756771450276_p10208o3h",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:10.288Z",
	"port": 5506,
	"requestId": "sim_1756771450276_p10208o3h",
	"processingTime": 12,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756771450280
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:10.293Z",
	"port": 5506,
	"requestId": "sim_1756771450293_fwxjc3f9j",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:10.298Z",
	"port": 5506,
	"requestId": "sim_1756771450293_fwxjc3f9j",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756771450297
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T00:04:10.303Z",
	"port": 5506,
	"requestId": "sim_1756771450303_dvefupcsn",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T00:04:10.307Z",
	"port": 5506,
	"requestId": "sim_1756771450303_dvefupcsn",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756771450306
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.488Z",
	"port": 5506,
	"requestId": "sim_1756775748488_1zy2fvdqg",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.510Z",
	"port": 5506,
	"requestId": "sim_1756775748488_1zy2fvdqg",
	"output": {
		"id": "msg_sim_1756775748488_1zy2fvdqg",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 22,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 2.2
		},
		"outputValidation": {
			"success": true,
			"processingTime": 2.2
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.516Z",
	"port": 5506,
	"requestId": "sim_1756775748516_lu2lc8wjw",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.544Z",
	"port": 5506,
	"requestId": "sim_1756775748516_lu2lc8wjw",
	"processingTime": 28,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756775748523
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.553Z",
	"port": 5506,
	"requestId": "sim_1756775748553_0s0thmt35",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.569Z",
	"port": 5506,
	"requestId": "sim_1756775748553_0s0thmt35",
	"output": {
		"id": "msg_sim_1756775748553_0s0thmt35",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 16,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.6
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.6
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.575Z",
	"port": 5506,
	"requestId": "sim_1756775748575_jpr82dq70",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.582Z",
	"port": 5506,
	"requestId": "sim_1756775748575_jpr82dq70",
	"processingTime": 7,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756775748581
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.588Z",
	"port": 5506,
	"requestId": "sim_1756775748588_usv1pt8xx",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.602Z",
	"port": 5506,
	"requestId": "sim_1756775748588_usv1pt8xx",
	"output": {
		"id": "msg_sim_1756775748588_usv1pt8xx",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 14,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.607Z",
	"port": 5506,
	"requestId": "sim_1756775748607_0ayorxr4u",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.622Z",
	"port": 5506,
	"requestId": "sim_1756775748607_0ayorxr4u",
	"output": {
		"id": "msg_sim_1756775748607_0ayorxr4u",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 15,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.5
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.5
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.628Z",
	"port": 5506,
	"requestId": "sim_1756775748628_6wvhkgprj",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.634Z",
	"port": 5506,
	"requestId": "sim_1756775748628_6wvhkgprj",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756775748633
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.640Z",
	"port": 5506,
	"requestId": "sim_1756775748640_jvyv8617l",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.645Z",
	"port": 5506,
	"requestId": "sim_1756775748640_jvyv8617l",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756775748644
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.650Z",
	"port": 5506,
	"requestId": "sim_1756775748650_951dylpx7",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.657Z",
	"port": 5506,
	"requestId": "sim_1756775748650_951dylpx7",
	"processingTime": 7,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756775748657
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.663Z",
	"port": 5506,
	"requestId": "sim_1756775748663_fy9dej8yx",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.668Z",
	"port": 5506,
	"requestId": "sim_1756775748663_fy9dej8yx",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756775748668
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:48.674Z",
	"port": 5506,
	"requestId": "sim_1756775748674_522jbamre",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:48.679Z",
	"port": 5506,
	"requestId": "sim_1756775748674_522jbamre",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756775748679
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:56.158Z",
	"port": 5506,
	"requestId": "sim_1756775756158_u8jcitqcn",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:56.162Z",
	"port": 5506,
	"requestId": "sim_1756775756158_u8jcitqcn",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:56.167Z",
	"port": 5506,
	"requestId": "sim_1756775756167_eppujiu3i",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:56.180Z",
	"port": 5506,
	"requestId": "sim_1756775756167_eppujiu3i",
	"processingTime": 13,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756775756170
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:56.185Z",
	"port": 5506,
	"requestId": "sim_1756775756185_j62znwdfm",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:56.190Z",
	"port": 5506,
	"requestId": "sim_1756775756185_j62znwdfm",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756775756189
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:15:56.194Z",
	"port": 5506,
	"requestId": "sim_1756775756194_jq2gfy8na",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:15:56.199Z",
	"port": 5506,
	"requestId": "sim_1756775756194_jq2gfy8na",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756775756199
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.284Z",
	"port": 5506,
	"requestId": "sim_1756775785284_r8969q6f1",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.299Z",
	"port": 5506,
	"requestId": "sim_1756775785284_r8969q6f1",
	"output": {
		"id": "msg_sim_1756775785284_r8969q6f1",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 15,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.5
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.5
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.305Z",
	"port": 5506,
	"requestId": "sim_1756775785305_6hz3mgiw2",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.327Z",
	"port": 5506,
	"requestId": "sim_1756775785305_6hz3mgiw2",
	"processingTime": 22,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756775785309
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.333Z",
	"port": 5506,
	"requestId": "sim_1756775785333_9lkdzugd3",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.344Z",
	"port": 5506,
	"requestId": "sim_1756775785333_9lkdzugd3",
	"output": {
		"id": "msg_sim_1756775785333_9lkdzugd3",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.349Z",
	"port": 5506,
	"requestId": "sim_1756775785349_t238tanaq",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.354Z",
	"port": 5506,
	"requestId": "sim_1756775785349_t238tanaq",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756775785353
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.358Z",
	"port": 5506,
	"requestId": "sim_1756775785358_drlea7ok1",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.370Z",
	"port": 5506,
	"requestId": "sim_1756775785358_drlea7ok1",
	"output": {
		"id": "msg_sim_1756775785358_drlea7ok1",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.374Z",
	"port": 5506,
	"requestId": "sim_1756775785374_z6f9o1big",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.384Z",
	"port": 5506,
	"requestId": "sim_1756775785374_z6f9o1big",
	"output": {
		"id": "msg_sim_1756775785374_z6f9o1big",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 10,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.389Z",
	"port": 5506,
	"requestId": "sim_1756775785389_rhvxtchqd",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.393Z",
	"port": 5506,
	"requestId": "sim_1756775785389_rhvxtchqd",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756775785393
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.398Z",
	"port": 5506,
	"requestId": "sim_1756775785398_qw8oplu7b",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.403Z",
	"port": 5506,
	"requestId": "sim_1756775785398_qw8oplu7b",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756775785402
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.408Z",
	"port": 5506,
	"requestId": "sim_1756775785408_omo6eo7ro",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.411Z",
	"port": 5506,
	"requestId": "sim_1756775785408_omo6eo7ro",
	"processingTime": 3,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756775785411
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.416Z",
	"port": 5506,
	"requestId": "sim_1756775785416_bzt46eexj",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.421Z",
	"port": 5506,
	"requestId": "sim_1756775785416_bzt46eexj",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756775785420
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:25.425Z",
	"port": 5506,
	"requestId": "sim_1756775785425_vuap4lote",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:25.430Z",
	"port": 5506,
	"requestId": "sim_1756775785425_vuap4lote",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756775785429
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:32.597Z",
	"port": 5506,
	"requestId": "sim_1756775792597_8pd7ms3cw",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:32.601Z",
	"port": 5506,
	"requestId": "sim_1756775792597_8pd7ms3cw",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:32.604Z",
	"port": 5506,
	"requestId": "sim_1756775792604_29snhox7f",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:32.615Z",
	"port": 5506,
	"requestId": "sim_1756775792604_29snhox7f",
	"processingTime": 11,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756775792608
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:32.619Z",
	"port": 5506,
	"requestId": "sim_1756775792619_9cvtzp6xg",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:32.623Z",
	"port": 5506,
	"requestId": "sim_1756775792619_9cvtzp6xg",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756775792623
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T01:16:32.628Z",
	"port": 5506,
	"requestId": "sim_1756775792628_iywu2h8m1",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T01:16:32.631Z",
	"port": 5506,
	"requestId": "sim_1756775792628_iywu2h8m1",
	"processingTime": 3,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756775792631
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.558Z",
	"port": 5506,
	"requestId": "sim_1756783366558_utmjoixsr",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.571Z",
	"port": 5506,
	"requestId": "sim_1756783366558_utmjoixsr",
	"output": {
		"id": "msg_sim_1756783366558_utmjoixsr",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.576Z",
	"port": 5506,
	"requestId": "sim_1756783366576_t1l3hh4w4",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.598Z",
	"port": 5506,
	"requestId": "sim_1756783366576_t1l3hh4w4",
	"processingTime": 22,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756783366580
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.603Z",
	"port": 5506,
	"requestId": "sim_1756783366603_x422ksxmv",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.613Z",
	"port": 5506,
	"requestId": "sim_1756783366603_x422ksxmv",
	"output": {
		"id": "msg_sim_1756783366603_x422ksxmv",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 10,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.617Z",
	"port": 5506,
	"requestId": "sim_1756783366617_cgn8u52rj",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.621Z",
	"port": 5506,
	"requestId": "sim_1756783366617_cgn8u52rj",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756783366620
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.625Z",
	"port": 5506,
	"requestId": "sim_1756783366625_9pxz7zmdy",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.635Z",
	"port": 5506,
	"requestId": "sim_1756783366625_9pxz7zmdy",
	"output": {
		"id": "msg_sim_1756783366625_9pxz7zmdy",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 10,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.639Z",
	"port": 5506,
	"requestId": "sim_1756783366639_eg994hvxw",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.648Z",
	"port": 5506,
	"requestId": "sim_1756783366639_eg994hvxw",
	"output": {
		"id": "msg_sim_1756783366639_eg994hvxw",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 9,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.9
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.9
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.651Z",
	"port": 5506,
	"requestId": "sim_1756783366651_0agt4jjmv",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.655Z",
	"port": 5506,
	"requestId": "sim_1756783366651_0agt4jjmv",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756783366654
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.658Z",
	"port": 5506,
	"requestId": "sim_1756783366658_w1zm0f5hx",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.662Z",
	"port": 5506,
	"requestId": "sim_1756783366658_w1zm0f5hx",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756783366662
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.666Z",
	"port": 5506,
	"requestId": "sim_1756783366666_t4ir68ovr",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.670Z",
	"port": 5506,
	"requestId": "sim_1756783366666_t4ir68ovr",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756783366670
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.678Z",
	"port": 5506,
	"requestId": "sim_1756783366678_ngn5cu8y3",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.682Z",
	"port": 5506,
	"requestId": "sim_1756783366678_ngn5cu8y3",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756783366682
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:46.686Z",
	"port": 5506,
	"requestId": "sim_1756783366686_eivugswa5",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:46.689Z",
	"port": 5506,
	"requestId": "sim_1756783366686_eivugswa5",
	"processingTime": 3,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756783366689
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:53.821Z",
	"port": 5506,
	"requestId": "sim_1756783373821_lffehnufq",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:53.824Z",
	"port": 5506,
	"requestId": "sim_1756783373821_lffehnufq",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:53.828Z",
	"port": 5506,
	"requestId": "sim_1756783373828_9sz9r5xxa",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:53.840Z",
	"port": 5506,
	"requestId": "sim_1756783373828_9sz9r5xxa",
	"processingTime": 12,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756783373832
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:53.844Z",
	"port": 5506,
	"requestId": "sim_1756783373844_us3qz1zq6",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:53.849Z",
	"port": 5506,
	"requestId": "sim_1756783373844_us3qz1zq6",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756783373848
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T03:22:53.853Z",
	"port": 5506,
	"requestId": "sim_1756783373853_x8jh0e61r",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T03:22:53.857Z",
	"port": 5506,
	"requestId": "sim_1756783373853_x8jh0e61r",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756783373857
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.225Z",
	"port": 5506,
	"requestId": "sim_1756786210225_swadtg9c0",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.239Z",
	"port": 5506,
	"requestId": "sim_1756786210225_swadtg9c0",
	"output": {
		"id": "msg_sim_1756786210225_swadtg9c0",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 14,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.4000000000000001
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.244Z",
	"port": 5506,
	"requestId": "sim_1756786210244_m8d0sf60w",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.265Z",
	"port": 5506,
	"requestId": "sim_1756786210244_m8d0sf60w",
	"processingTime": 21,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756786210248
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.270Z",
	"port": 5506,
	"requestId": "sim_1756786210270_pya64kt97",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.282Z",
	"port": 5506,
	"requestId": "sim_1756786210270_pya64kt97",
	"output": {
		"id": "msg_sim_1756786210270_pya64kt97",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.286Z",
	"port": 5506,
	"requestId": "sim_1756786210286_2jqk4fh5r",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.291Z",
	"port": 5506,
	"requestId": "sim_1756786210286_2jqk4fh5r",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756786210290
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.295Z",
	"port": 5506,
	"requestId": "sim_1756786210295_qce3p0flo",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.304Z",
	"port": 5506,
	"requestId": "sim_1756786210295_qce3p0flo",
	"output": {
		"id": "msg_sim_1756786210295_qce3p0flo",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 9,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.9
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.9
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.308Z",
	"port": 5506,
	"requestId": "sim_1756786210308_2i3rppy9j",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.317Z",
	"port": 5506,
	"requestId": "sim_1756786210308_2i3rppy9j",
	"output": {
		"id": "msg_sim_1756786210308_2i3rppy9j",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 9,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.9
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.9
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.320Z",
	"port": 5506,
	"requestId": "sim_1756786210320_4ujx98mgf",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.324Z",
	"port": 5506,
	"requestId": "sim_1756786210320_4ujx98mgf",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756786210324
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.328Z",
	"port": 5506,
	"requestId": "sim_1756786210328_xwnty1kid",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.332Z",
	"port": 5506,
	"requestId": "sim_1756786210328_xwnty1kid",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756786210332
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.336Z",
	"port": 5506,
	"requestId": "sim_1756786210336_xtvz4odkm",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.339Z",
	"port": 5506,
	"requestId": "sim_1756786210336_xtvz4odkm",
	"processingTime": 3,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756786210339
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.343Z",
	"port": 5506,
	"requestId": "sim_1756786210343_6ljxlfuvn",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.347Z",
	"port": 5506,
	"requestId": "sim_1756786210343_6ljxlfuvn",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756786210347
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:10.351Z",
	"port": 5506,
	"requestId": "sim_1756786210351_k6xfkddbf",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:10.354Z",
	"port": 5506,
	"requestId": "sim_1756786210351_k6xfkddbf",
	"processingTime": 3,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756786210354
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:18.038Z",
	"port": 5506,
	"requestId": "sim_1756786218038_i9gga280p",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:18.042Z",
	"port": 5506,
	"requestId": "sim_1756786218038_i9gga280p",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:18.046Z",
	"port": 5506,
	"requestId": "sim_1756786218046_btpu74e8b",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:18.057Z",
	"port": 5506,
	"requestId": "sim_1756786218046_btpu74e8b",
	"processingTime": 11,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756786218049
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:18.062Z",
	"port": 5506,
	"requestId": "sim_1756786218062_khtvexw87",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:18.067Z",
	"port": 5506,
	"requestId": "sim_1756786218062_khtvexw87",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756786218067
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:10:18.071Z",
	"port": 5506,
	"requestId": "sim_1756786218071_o7kn5vgjw",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:10:18.076Z",
	"port": 5506,
	"requestId": "sim_1756786218071_o7kn5vgjw",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756786218076
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.717Z",
	"port": 5506,
	"requestId": "sim_1756786265717_qqy087ce2",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.732Z",
	"port": 5506,
	"requestId": "sim_1756786265717_qqy087ce2",
	"output": {
		"id": "msg_sim_1756786265717_qqy087ce2",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 15,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.5
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.5
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.738Z",
	"port": 5506,
	"requestId": "sim_1756786265738_cihmet1d0",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.760Z",
	"port": 5506,
	"requestId": "sim_1756786265738_cihmet1d0",
	"processingTime": 22,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756786265742
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.766Z",
	"port": 5506,
	"requestId": "sim_1756786265766_d96s26bm1",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.778Z",
	"port": 5506,
	"requestId": "sim_1756786265766_d96s26bm1",
	"output": {
		"id": "msg_sim_1756786265766_d96s26bm1",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.784Z",
	"port": 5506,
	"requestId": "sim_1756786265784_fg5ofonz4",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.790Z",
	"port": 5506,
	"requestId": "sim_1756786265784_fg5ofonz4",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756786265789
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.794Z",
	"port": 5506,
	"requestId": "sim_1756786265794_v23jtue4f",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.807Z",
	"port": 5506,
	"requestId": "sim_1756786265794_v23jtue4f",
	"output": {
		"id": "msg_sim_1756786265794_v23jtue4f",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.811Z",
	"port": 5506,
	"requestId": "sim_1756786265811_3zlzjznuk",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.823Z",
	"port": 5506,
	"requestId": "sim_1756786265811_3zlzjznuk",
	"output": {
		"id": "msg_sim_1756786265811_3zlzjznuk",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.828Z",
	"port": 5506,
	"requestId": "sim_1756786265828_sti2r7uek",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.833Z",
	"port": 5506,
	"requestId": "sim_1756786265828_sti2r7uek",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756786265832
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.839Z",
	"port": 5506,
	"requestId": "sim_1756786265839_s3kxpu060",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.844Z",
	"port": 5506,
	"requestId": "sim_1756786265839_s3kxpu060",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756786265843
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.848Z",
	"port": 5506,
	"requestId": "sim_1756786265848_el0m7bek8",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.853Z",
	"port": 5506,
	"requestId": "sim_1756786265848_el0m7bek8",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756786265852
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.857Z",
	"port": 5506,
	"requestId": "sim_1756786265857_1kuf8rnh3",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.861Z",
	"port": 5506,
	"requestId": "sim_1756786265857_1kuf8rnh3",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756786265861
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:05.865Z",
	"port": 5506,
	"requestId": "sim_1756786265865_3mw90cfl9",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:05.871Z",
	"port": 5506,
	"requestId": "sim_1756786265865_3mw90cfl9",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756786265870
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:14.489Z",
	"port": 5506,
	"requestId": "sim_1756786274489_906rrsqtb",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:14.493Z",
	"port": 5506,
	"requestId": "sim_1756786274489_906rrsqtb",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:14.497Z",
	"port": 5506,
	"requestId": "sim_1756786274497_d795l0r0r",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:14.510Z",
	"port": 5506,
	"requestId": "sim_1756786274497_d795l0r0r",
	"processingTime": 13,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756786274502
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:14.514Z",
	"port": 5506,
	"requestId": "sim_1756786274514_cjultymoi",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:14.518Z",
	"port": 5506,
	"requestId": "sim_1756786274514_cjultymoi",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756786274518
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:11:14.523Z",
	"port": 5506,
	"requestId": "sim_1756786274523_jhv8tgmhh",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:11:14.528Z",
	"port": 5506,
	"requestId": "sim_1756786274523_jhv8tgmhh",
	"processingTime": 5,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756786274527
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:15.911Z",
	"port": 5506,
	"requestId": "sim_1756787415911_7k59u3qrp",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:15.926Z",
	"port": 5506,
	"requestId": "sim_1756787415911_7k59u3qrp",
	"output": {
		"id": "msg_sim_1756787415911_7k59u3qrp",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 15,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.5
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.5
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:15.931Z",
	"port": 5506,
	"requestId": "sim_1756787415931_8k2ux6k51",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:15.952Z",
	"port": 5506,
	"requestId": "sim_1756787415931_8k2ux6k51",
	"processingTime": 21,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787415935
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:15.958Z",
	"port": 5506,
	"requestId": "sim_1756787415958_ev19tecdm",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:15.970Z",
	"port": 5506,
	"requestId": "sim_1756787415958_ev19tecdm",
	"output": {
		"id": "msg_sim_1756787415958_ev19tecdm",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:15.975Z",
	"port": 5506,
	"requestId": "sim_1756787415975_n6rfn168v",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:15.981Z",
	"port": 5506,
	"requestId": "sim_1756787415975_n6rfn168v",
	"processingTime": 6,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787415980
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:15.985Z",
	"port": 5506,
	"requestId": "sim_1756787415985_qcbuizi7w",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:15.997Z",
	"port": 5506,
	"requestId": "sim_1756787415985_qcbuizi7w",
	"output": {
		"id": "msg_sim_1756787415985_qcbuizi7w",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:16.002Z",
	"port": 5506,
	"requestId": "sim_1756787416002_znfjfa8fa",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:16.014Z",
	"port": 5506,
	"requestId": "sim_1756787416002_znfjfa8fa",
	"output": {
		"id": "msg_sim_1756787416002_znfjfa8fa",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:16.018Z",
	"port": 5506,
	"requestId": "sim_1756787416018_9nvf3i5vo",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:16.023Z",
	"port": 5506,
	"requestId": "sim_1756787416018_9nvf3i5vo",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787416022
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:16.028Z",
	"port": 5506,
	"requestId": "sim_1756787416028_1t74d2cgs",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:16.033Z",
	"port": 5506,
	"requestId": "sim_1756787416028_1t74d2cgs",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787416032
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:16.037Z",
	"port": 5506,
	"requestId": "sim_1756787416037_sx9ihcamr",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:16.041Z",
	"port": 5506,
	"requestId": "sim_1756787416037_sx9ihcamr",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756787416041
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:16.045Z",
	"port": 5506,
	"requestId": "sim_1756787416045_ggti31awv",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:16.049Z",
	"port": 5506,
	"requestId": "sim_1756787416045_ggti31awv",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756787416049
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:16.053Z",
	"port": 5506,
	"requestId": "sim_1756787416053_8kb91139z",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:16.057Z",
	"port": 5506,
	"requestId": "sim_1756787416053_8kb91139z",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756787416057
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:28.221Z",
	"port": 5506,
	"requestId": "sim_1756787428221_qwof6q7s8",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:28.225Z",
	"port": 5506,
	"requestId": "sim_1756787428221_qwof6q7s8",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:28.229Z",
	"port": 5506,
	"requestId": "sim_1756787428229_fckbjti3s",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:28.241Z",
	"port": 5506,
	"requestId": "sim_1756787428229_fckbjti3s",
	"processingTime": 12,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756787428232
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:28.245Z",
	"port": 5506,
	"requestId": "sim_1756787428245_n2gxgp9p0",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:28.249Z",
	"port": 5506,
	"requestId": "sim_1756787428245_n2gxgp9p0",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756787428249
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:30:28.252Z",
	"port": 5506,
	"requestId": "sim_1756787428252_owmhjxkhz",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:30:28.256Z",
	"port": 5506,
	"requestId": "sim_1756787428252_owmhjxkhz",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756787428256
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.205Z",
	"port": 5506,
	"requestId": "sim_1756787862205_624w8p7dm",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.222Z",
	"port": 5506,
	"requestId": "sim_1756787862205_624w8p7dm",
	"output": {
		"id": "msg_sim_1756787862205_624w8p7dm",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 17,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.227Z",
	"port": 5506,
	"requestId": "sim_1756787862227_1xalo3kkb",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.249Z",
	"port": 5506,
	"requestId": "sim_1756787862227_1xalo3kkb",
	"processingTime": 22,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787862232
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.255Z",
	"port": 5506,
	"requestId": "sim_1756787862255_0iobcajgp",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.267Z",
	"port": 5506,
	"requestId": "sim_1756787862255_0iobcajgp",
	"output": {
		"id": "msg_sim_1756787862255_0iobcajgp",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.272Z",
	"port": 5506,
	"requestId": "sim_1756787862272_7fwcp9a95",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.277Z",
	"port": 5506,
	"requestId": "sim_1756787862272_7fwcp9a95",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787862276
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.281Z",
	"port": 5506,
	"requestId": "sim_1756787862281_8q6muaq7h",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.291Z",
	"port": 5506,
	"requestId": "sim_1756787862281_8q6muaq7h",
	"output": {
		"id": "msg_sim_1756787862281_8q6muaq7h",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 10,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.295Z",
	"port": 5506,
	"requestId": "sim_1756787862295_fnbmcuvrw",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.306Z",
	"port": 5506,
	"requestId": "sim_1756787862295_fnbmcuvrw",
	"output": {
		"id": "msg_sim_1756787862295_fnbmcuvrw",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.310Z",
	"port": 5506,
	"requestId": "sim_1756787862310_1dmt7x82h",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.314Z",
	"port": 5506,
	"requestId": "sim_1756787862310_1dmt7x82h",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787862313
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.317Z",
	"port": 5506,
	"requestId": "sim_1756787862317_ur20d8lfn",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.321Z",
	"port": 5506,
	"requestId": "sim_1756787862317_ur20d8lfn",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787862321
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.325Z",
	"port": 5506,
	"requestId": "sim_1756787862325_ysfoi9kbj",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.329Z",
	"port": 5506,
	"requestId": "sim_1756787862325_ysfoi9kbj",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756787862329
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.333Z",
	"port": 5506,
	"requestId": "sim_1756787862333_sb0r3878g",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.337Z",
	"port": 5506,
	"requestId": "sim_1756787862333_sb0r3878g",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756787862336
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:42.341Z",
	"port": 5506,
	"requestId": "sim_1756787862341_6lf8tbrfy",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:42.345Z",
	"port": 5506,
	"requestId": "sim_1756787862341_6lf8tbrfy",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756787862345
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:51.712Z",
	"port": 5506,
	"requestId": "sim_1756787871712_9rtvor7qf",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:51.715Z",
	"port": 5506,
	"requestId": "sim_1756787871712_9rtvor7qf",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:51.718Z",
	"port": 5506,
	"requestId": "sim_1756787871718_9ox6awtpv",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:51.730Z",
	"port": 5506,
	"requestId": "sim_1756787871718_9ox6awtpv",
	"processingTime": 12,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756787871722
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:51.734Z",
	"port": 5506,
	"requestId": "sim_1756787871734_69juvym35",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:51.738Z",
	"port": 5506,
	"requestId": "sim_1756787871734_69juvym35",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756787871738
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:37:51.741Z",
	"port": 5506,
	"requestId": "sim_1756787871741_smwmgfnfi",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:37:51.745Z",
	"port": 5506,
	"requestId": "sim_1756787871741_smwmgfnfi",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756787871745
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.775Z",
	"port": 5506,
	"requestId": "sim_1756787915775_oxse6jrhw",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.790Z",
	"port": 5506,
	"requestId": "sim_1756787915775_oxse6jrhw",
	"output": {
		"id": "msg_sim_1756787915775_oxse6jrhw",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 15,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.5
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.5
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.797Z",
	"port": 5506,
	"requestId": "sim_1756787915797_y7j9cok0p",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.818Z",
	"port": 5506,
	"requestId": "sim_1756787915797_y7j9cok0p",
	"processingTime": 21,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787915801
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.823Z",
	"port": 5506,
	"requestId": "sim_1756787915823_4xljzmrsi",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.834Z",
	"port": 5506,
	"requestId": "sim_1756787915823_4xljzmrsi",
	"output": {
		"id": "msg_sim_1756787915823_4xljzmrsi",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 11,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.1
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.840Z",
	"port": 5506,
	"requestId": "sim_1756787915840_1a8m60on1",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.844Z",
	"port": 5506,
	"requestId": "sim_1756787915840_1a8m60on1",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787915844
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.849Z",
	"port": 5506,
	"requestId": "sim_1756787915849_rjdqxrniq",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.861Z",
	"port": 5506,
	"requestId": "sim_1756787915849_rjdqxrniq",
	"output": {
		"id": "msg_sim_1756787915849_rjdqxrniq",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 12,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.2000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.865Z",
	"port": 5506,
	"requestId": "sim_1756787915865_jept1kbxh",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.875Z",
	"port": 5506,
	"requestId": "sim_1756787915865_jept1kbxh",
	"output": {
		"id": "msg_sim_1756787915865_jept1kbxh",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 10,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.880Z",
	"port": 5506,
	"requestId": "sim_1756787915880_qaun11et3",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.884Z",
	"port": 5506,
	"requestId": "sim_1756787915880_qaun11et3",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787915884
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.889Z",
	"port": 5506,
	"requestId": "sim_1756787915889_qleentfep",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.893Z",
	"port": 5506,
	"requestId": "sim_1756787915889_qleentfep",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756787915892
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.898Z",
	"port": 5506,
	"requestId": "sim_1756787915897_359pi4te9",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.902Z",
	"port": 5506,
	"requestId": "sim_1756787915897_359pi4te9",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756787915901
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.906Z",
	"port": 5506,
	"requestId": "sim_1756787915906_zcfq0z6i7",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.910Z",
	"port": 5506,
	"requestId": "sim_1756787915906_zcfq0z6i7",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756787915910
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:35.914Z",
	"port": 5506,
	"requestId": "sim_1756787915914_i8mjvubeg",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:35.918Z",
	"port": 5506,
	"requestId": "sim_1756787915914_i8mjvubeg",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756787915918
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:45.936Z",
	"port": 5506,
	"requestId": "sim_1756787925936_xhhttupre",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:45.939Z",
	"port": 5506,
	"requestId": "sim_1756787925936_xhhttupre",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 3,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.30000000000000004
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:45.943Z",
	"port": 5506,
	"requestId": "sim_1756787925943_z67j97ok1",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:45.954Z",
	"port": 5506,
	"requestId": "sim_1756787925943_z67j97ok1",
	"processingTime": 11,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756787925946
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:45.957Z",
	"port": 5506,
	"requestId": "sim_1756787925957_42sayjmtk",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:45.960Z",
	"port": 5506,
	"requestId": "sim_1756787925957_42sayjmtk",
	"processingTime": 3,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756787925960
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:38:45.964Z",
	"port": 5506,
	"requestId": "sim_1756787925964_elpqg480e",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:38:45.968Z",
	"port": 5506,
	"requestId": "sim_1756787925964_elpqg480e",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756787925967
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.699Z",
	"port": 5506,
	"requestId": "sim_1756788626699_3dbn2qqgs",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello, how are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.716Z",
	"port": 5506,
	"requestId": "sim_1756788626699_3dbn2qqgs",
	"output": {
		"id": "msg_sim_1756788626699_3dbn2qqgs",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Hello, how are you?\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 17,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.7000000000000002
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.722Z",
	"port": 5506,
	"requestId": "sim_1756788626722_svvi5tm56",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 2000,
		"system": "You are a helpful assistant.",
		"messages": [
			{
				"role": "user",
				"content": "Explain quantum computing"
			}
		],
		"temperature": 0.7
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.751Z",
	"port": 5506,
	"requestId": "sim_1756788626722_svvi5tm56",
	"processingTime": 29,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:212:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756788626726
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.757Z",
	"port": 5506,
	"requestId": "sim_1756788626757_s8d5wut0o",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "What is the capital of France?"
			},
			{
				"role": "assistant",
				"content": "The capital of France is Paris."
			},
			{
				"role": "user",
				"content": "What is its population?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.767Z",
	"port": 5506,
	"requestId": "sim_1756788626757_s8d5wut0o",
	"output": {
		"id": "msg_sim_1756788626757_s8d5wut0o",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-haiku-20240307. Your message was: \"What is the capital of France?\""
			}
		],
		"model": "claude-3-haiku-20240307",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 54,
			"output_tokens": 50
		}
	},
	"processingTime": 10,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.771Z",
	"port": 5506,
	"requestId": "sim_1756788626771_rjib4o90b",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 2000,
		"messages": [
			{
				"role": "user",
				"content": "What is the weather like in New York?"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get current weather information",
				"input_schema": {
					"type": "object",
					"properties": {
						"location": {
							"type": "string"
						},
						"unit": {
							"type": "string",
							"enum": [
								"celsius",
								"fahrenheit"
							]
						}
					},
					"required": [
						"location"
					]
				}
			}
		],
		"tool_choice": {
			"type": "auto"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.776Z",
	"port": 5506,
	"requestId": "sim_1756788626771_rjib4o90b",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:275:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "one of: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"actual": "invalid enum value",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756788626775
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 的值必须是枚举值之一: 1, 1000, 4096, 8192, 16384, 32768, 65536, 100000, 200000"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.780Z",
	"port": 5506,
	"requestId": "sim_1756788626780_vrhdg91aw",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"stream": true,
		"messages": [
			{
				"role": "user",
				"content": "Write a short story"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.793Z",
	"port": 5506,
	"requestId": "sim_1756788626780_vrhdg91aw",
	"output": {
		"id": "msg_sim_1756788626780_vrhdg91aw",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-sonnet-20240229. Your message was: \"Write a short story\""
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 16,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.797Z",
	"port": 5506,
	"requestId": "sim_1756788626797_vb3ehqey6",
	"input": {
		"model": "claude-3-opus-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"metadata": {
			"user_id": "user_123",
			"conversation_id": "conv_456"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.810Z",
	"port": 5506,
	"requestId": "sim_1756788626797_vb3ehqey6",
	"output": {
		"id": "msg_sim_1756788626797_vb3ehqey6",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a mock response for your request with model claude-3-opus-20240229. Your message was: \"Hello\""
			}
		],
		"model": "claude-3-opus-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 12,
			"output_tokens": 50
		}
	},
	"processingTime": 13,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 1.3
		},
		"outputValidation": {
			"success": true,
			"processingTime": 1.3
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.814Z",
	"port": 5506,
	"requestId": "sim_1756788626814_8nrnx8b8q",
	"input": {
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.819Z",
	"port": 5506,
	"requestId": "sim_1756788626814_8nrnx8b8q",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'model' 是必需的",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'model' 是必需的\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:338:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "model",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "model",
			"message": "字段 'model' 是必需的",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756788626818
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'model' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.823Z",
	"port": 5506,
	"requestId": "sim_1756788626823_ecky1rw0m",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": "invalid_number",
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.827Z",
	"port": 5506,
	"requestId": "sim_1756788626823_ecky1rw0m",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
		"code": "FIELD_VALIDATION_FAILED",
		"stack": "InputValidationError: 字段 'max_tokens' 类型不匹配，期望: number, 实际: string\n    at ClientInputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:179:29)\n    at ClientInputValidator.handleValidationFailure [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:127:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:362:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "number",
			"actual": "string",
			"value": "see originalData",
			"path": "max_tokens",
			"message": "字段 'max_tokens' 类型不匹配，期望: number, 实际: string",
			"code": "FIELD_VALIDATION_FAILED",
			"timestamp": 1756788626827
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'max_tokens' 类型不匹配，期望: number, 实际: string"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.831Z",
	"port": 5506,
	"requestId": "sim_1756788626831_by5pvsv4p",
	"input": {
		"model": "claude-3-haiku-20240307",
		"max_tokens": 8192,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.835Z",
	"port": 5506,
	"requestId": "sim_1756788626831_by5pvsv4p",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "claude-3-haiku model only supports max_tokens up to 4096",
		"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
		"stack": "InputValidationError: claude-3-haiku model only supports max_tokens up to 4096\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:259:13)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:385:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "max_tokens",
			"expected": "≤ 4096 for claude-3-haiku",
			"actual": "8192",
			"value": 8192,
			"path": "max_tokens",
			"message": "claude-3-haiku model only supports max_tokens up to 4096",
			"code": "MODEL_TOKEN_LIMIT_EXCEEDED",
			"timestamp": 1756788626835
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"claude-3-haiku model only supports max_tokens up to 4096"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.839Z",
	"port": 5506,
	"requestId": "sim_1756788626839_hv7dg5p3r",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			}
		],
		"tools": [
			{
				"name": "get_weather",
				"description": "Get weather",
				"input_schema": {
					"type": "object",
					"properties": {}
				}
			}
		],
		"tool_choice": {
			"type": "tool",
			"name": "get_temperature"
		}
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.844Z",
	"port": 5506,
	"requestId": "sim_1756788626839_hv7dg5p3r",
	"processingTime": 5,
	"error": {
		"name": "InputValidationError",
		"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
		"code": "TOOL_NOT_FOUND",
		"stack": "InputValidationError: tool 'get_temperature' specified in tool_choice but not defined in tools array\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:276:15)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:418:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "tool_choice.name",
			"expected": "existing tool name",
			"actual": "get_temperature",
			"value": "get_temperature",
			"path": "tool_choice.name",
			"message": "tool 'get_temperature' specified in tool_choice but not defined in tools array",
			"code": "TOOL_NOT_FOUND",
			"timestamp": 1756788626843
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"tool 'get_temperature' specified in tool_choice but not defined in tools array"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:26.849Z",
	"port": 5506,
	"requestId": "sim_1756788626849_2oepl8x1k",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Hello"
			},
			{
				"role": "user",
				"content": "How are you?"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:26.853Z",
	"port": 5506,
	"requestId": "sim_1756788626849_2oepl8x1k",
	"processingTime": 4,
	"error": {
		"name": "InputValidationError",
		"message": "consecutive messages with role 'user' are not allowed",
		"code": "INVALID_MESSAGE_SEQUENCE",
		"stack": "InputValidationError: consecutive messages with role 'user' are not allowed\n    at ClientInputValidator.validateBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:295:17)\n    at ClientInputValidator.validateBusinessLogic [as validateClaudeCodeRequest] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/input-validator.ts:131:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:67:50)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:444:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.input.validation",
			"field": "messages[1].role",
			"expected": "alternating roles",
			"actual": "consecutive user",
			"value": "user",
			"path": "messages[1].role",
			"message": "consecutive messages with role 'user' are not allowed",
			"code": "INVALID_MESSAGE_SEQUENCE",
			"timestamp": 1756788626853
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"consecutive messages with role 'user' are not allowed"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:38.022Z",
	"port": 5506,
	"requestId": "sim_1756788638022_5ylunb61o",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test output validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:38.026Z",
	"port": 5506,
	"requestId": "sim_1756788638022_5ylunb61o",
	"output": {
		"id": "msg_test_123",
		"type": "message",
		"role": "assistant",
		"content": [
			{
				"type": "text",
				"text": "This is a valid response"
			}
		],
		"model": "claude-3-sonnet-20240229",
		"stop_reason": "end_turn",
		"usage": {
			"input_tokens": 10,
			"output_tokens": 5
		}
	},
	"processingTime": 4,
	"validation": {
		"inputValidation": {
			"success": true,
			"processingTime": 0.4
		},
		"outputValidation": {
			"success": true,
			"processingTime": 0.4
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:38.030Z",
	"port": 5506,
	"requestId": "sim_1756788638030_y0hk7tcz8",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test invalid output"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:38.041Z",
	"port": 5506,
	"requestId": "sim_1756788638030_y0hk7tcz8",
	"processingTime": 11,
	"error": {
		"name": "OutputValidationError",
		"message": "字段 'id' 是必需的",
		"code": "OUTPUT_FIELD_VALIDATION_FAILED",
		"stack": "OutputValidationError: 字段 'id' 是必需的\n    at ClientOutputValidator.handleValidationFailure (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:210:29)\n    at ClientOutputValidator.handleValidationFailure [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:126:14)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:617:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "id",
			"expected": "valid value",
			"actual": "invalid value",
			"value": "see originalData",
			"path": "id",
			"message": "字段 'id' 是必需的",
			"code": "OUTPUT_FIELD_VALIDATION_FAILED",
			"timestamp": 1756788638033
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"字段 'id' 是必需的"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:38.045Z",
	"port": 5506,
	"requestId": "sim_1756788638045_0zt3ishdn",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test business logic validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:38.049Z",
	"port": 5506,
	"requestId": "sim_1756788638045_0zt3ishdn",
	"processingTime": 4,
	"error": {
		"name": "OutputValidationError",
		"message": "text content cannot be empty",
		"code": "EMPTY_TEXT_CONTENT",
		"stack": "OutputValidationError: text content cannot be empty\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:294:17)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:657:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "content[0].text",
			"expected": "non-empty string",
			"actual": "empty or missing",
			"value": "",
			"path": "content[0].text",
			"message": "text content cannot be empty",
			"code": "EMPTY_TEXT_CONTENT",
			"timestamp": 1756788638049
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"text content cannot be empty"
			]
		}
	}
}
{
	"timestamp": "2025-09-02T04:50:38.054Z",
	"port": 5506,
	"requestId": "sim_1756788638054_xyycvojs1",
	"input": {
		"model": "claude-3-sonnet-20240229",
		"max_tokens": 1000,
		"messages": [
			{
				"role": "user",
				"content": "Test token validation"
			}
		]
	},
	"metadata": {
		"userAgent": "ClaudeCodeRequestSimulator/4.0.0",
		"clientIP": "127.0.0.1",
		"sessionId": "test_session",
		"conversationId": "test_conversation"
	}
}
{
	"timestamp": "2025-09-02T04:50:38.057Z",
	"port": 5506,
	"requestId": "sim_1756788638054_xyycvojs1",
	"processingTime": 3,
	"error": {
		"name": "OutputValidationError",
		"message": "input_tokens cannot be negative",
		"code": "NEGATIVE_INPUT_TOKENS",
		"stack": "OutputValidationError: input_tokens cannot be negative\n    at ClientOutputValidator.validateOutputBusinessLogic (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:337:15)\n    at ClientOutputValidator.validateOutputBusinessLogic [as validateClaudeCodeResponse] (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/validation/output-validator.ts:130:12)\n    at ClaudeCodeRequestSimulator.simulateRequest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:78:48)\n    at Object.<anonymous> (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/src/client/__tests__/claude-code-request-simulator.test.ts:696:38)\n    at Promise.finally.completed (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1496:10)\n    at _callCircusTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/jestAdapterInit.js:1917:21)\n    at jestAdapter (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:275:16)\n    at runTest (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:343:7)\n    at Object.worker (/Users/fanzhang/Documents/github/route-claudecode/workspace/main-development/node_modules/jest-runner/build/testWorker.js:497:12)",
		"details": {
			"module": "client.output.validation",
			"field": "usage.input_tokens",
			"expected": "non-negative number",
			"actual": "-5",
			"value": -5,
			"path": "usage.input_tokens",
			"message": "input_tokens cannot be negative",
			"code": "NEGATIVE_INPUT_TOKENS",
			"timestamp": 1756788638057
		}
	},
	"validation": {
		"inputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		},
		"outputValidation": {
			"success": false,
			"errors": [
				"input_tokens cannot be negative"
			]
		}
	}
}
